TY.loadedModule("TY.util.highlight"),jQuery.fn.highlight=function(e,t){function o(){var e=jQuery(document).data("highlight");return e?e:[]}function a(e){var t=o();return t?-1!==t.indexOf(e)?!0:!1:void 0}function n(e){var t=o();t&&-1===t.indexOf(e)&&(t.push(e),jQuery(document).data("highlight",t))}function r(e,t,o){if(o=o||"highlight","string"==jQuery.type(t)){t=t.toUpperCase();var s=0;if(3==e.nodeType){var i=e.data.toUpperCase().indexOf(t);if(i>=0&&!a(t)){n(t);var u=document.createElement("span");u.className=o;var l=e.splitText(i),h=(l.splitText(t.length),l.cloneNode(!0));u.appendChild(h),l.parentNode.replaceChild(u,l),s=1}}else if(1==e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName)&&e.className!==o)for(var d=0;d<e.childNodes.length;++d)d+=r(e.childNodes[d],t);return s}if("object"==jQuery.type(t)){t.key=t.key.toUpperCase();var s=0;if(3==e.nodeType){var i=e.data.toUpperCase().indexOf(t.key);if(i>=0&&!a(t.key)){n(t.key);var u=document.createElement("span");u.className=o,u.setAttribute("linkurl",t.url),u.style.cursor="pointer",u.onclick=function(){var e=jQuery.trim(this.getAttribute("linkurl"));window.open(e)};var l=e.splitText(i),h=(l.splitText(t.key.length),l.cloneNode(!0));u.appendChild(h),l.parentNode.replaceChild(u,l),s=1}}else if(1==e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName)&&e.className!==o)for(var d=0;d<e.childNodes.length;++d)d+=r(e.childNodes[d],t,o);return s}}return this.each(function(){r(this,e,t)})},jQuery.fn.removeHighlight=function(className){var className_Default="highlight";return className&&(className_Default=className),this.find("span."+className_Default).each(function(){with(this.parentNode.firstChild.nodeName,this.parentNode)replaceChild(this.firstChild,this),normalize()}).end()},jQuery.fn.dynaCloud=function(e){var t={};return this.each(function(){var o=[],a=0;if(jQuery.wordStats&&jQuery.dynaCloud.wordStats){jQuery.wordStats.computeTopWords(jQuery.dynaCloud.max,this);for(var n=0,r=jQuery.wordStats.topWords.length;r>n&&n<=jQuery.dynaCloud.max;++n){var s=jQuery.wordStats.topWords[n].substring(1);"undefined"==typeof t[s]?t[s]={count:jQuery.wordStats.topWeights[n],el:s}:t[s].count+=jQuery.wordStats.topWeights[n],a=Math.max(t[s].count,a)}jQuery.wordStats.clear()}else{var i=jQuery(this).text().replace(/[^A-Z\xC4\xD6\xDCa-z\xE4\xF6\xFC\xDF0-9_]/g," ").replace(jQuery.dynaCloud.stopwords," ").split(" "),u=/^[a-z\xE4\xF6\xFC]*[A-Z\xC4\xD6\xDC]([A-Z\xC4\xD6\xDC\xDF]+|[a-z\xE4\xF6\xFC\xDF]{3,})/;jQuery.each(i,function(e,o){if(u.test(o)){var n=o.toLowerCase();"undefined"==typeof t[n]?t[n]={count:1,el:o}:t[n].count+=1,a=Math.max(t[n].count,a)}})}jQuery.each(t,function(e,t){o[o.length]=t}),jQuery.dynaCloud.sort&&o.sort(function(e,t){return e.count==t.count?e.el<t.el?-1:e.el==t.el?0:1:e.count<t.count?1:-1});var l;0==(l=jQuery(e?e:"#dynacloud")).length&&(jQuery(document.body).append('<p id="dynacloud"></p>'),l=jQuery("#dynacloud")),l.empty();for(var h=-1==jQuery.dynaCloud.max?o.length:Math.min(jQuery.dynaCloud.max,o.length),n=0;h>n;++n)l.append('<a href="#'+o[n].el+'" style="font-size: '+Math.ceil(o[n].count/a*jQuery.dynaCloud.scale)+'em"><span>'+o[n].el+"</span></a> &nbsp; ");var d=this;jQuery("a",l).each(function(){jQuery(this).click(function(){jQuery.dynaCloud.single&&jQuery(document.body).removeHighlight();var e=jQuery(this).text().toUpperCase();return jQuery(d).each(function(){jQuery(this).highlight(e)}),!1})})})},jQuery.dynaCloud={max:20,sort:!0,auto:!0,single:!0,wordStats:!0,scale:4,isSingle:!0,stopwords:["a","about","above","accordingly","after","again","against","ah","all","also","although","always","am","among","amongst","an","and","any","anymore","anyone","are","as","at","away","be","been","begin","beginning","beginnings","begins","begone","begun","being","below","between","but","by","ca","can","cannot","come","could","did","do","doing","during","each","either","else","end","et","etc","even","ever","far","ff","following","for","from","further","furthermore","get","go","goes","going","got","had","has","have","he","her","hers","herself","him","himself","his","how","i","if","in","into","is","it","its","itself","last","lastly","less","many","may","me","might","more","must","my","myself","near","nearly","never","new","next","no","not","now","o","of","off","often","oh","on","only","or","other","otherwise","our","ourselves","out","over","perhaps","put","puts","quite","s","said","saw","say","see","seen","shall","she","should","since","so","some","such","t","than","that","the","their","them","themselves","then","there","therefore","these","they","this","those","though","throughout","thus","to","too","toward","unless","until","up","upon","us","ve","very","was","we","were","what","whatever","when","where","which","while","who","whom","whomever","whose","why","with","within","without","would","yes","your","yours","yourself","yourselves"]},jQuery(function(){jQuery.dynaCloud.stopwords=new RegExp("\\s(("+jQuery.dynaCloud.stopwords.join("|")+")\\s)+","gi"),jQuery.dynaCloud.auto&&jQuery(".dynacloud").dynaCloud()});