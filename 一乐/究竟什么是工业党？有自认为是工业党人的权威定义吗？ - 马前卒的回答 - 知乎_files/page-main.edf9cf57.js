(function(z){
var dH=function(a){a.di=!1;a.status=0;z.eC(a)};var eH=function(a){a.Ly=!0;a.bE=z.Pi(a.m()).height;z.FF+=a.bE;z.x(z.xr,function(a){a&&!a.Ly&&a.sl&&a.mp()})};var fH=function(a){var b={};z.x(a.data.kd(),function(a){b[a]=this.data.get(a)},a);return b};var gH=function(){this.jB="";this.dL=hH};var iH=function(){this.gk="";this.UK=jH};var kH=function(a){return a instanceof gH&&a.constructor===gH&&a.dL===hH?a.jB:"type_error:Const"};var lH=function(){this.tI="";this.gL=mH};
var nH=function(a){function b(a){if(z.oa(a))z.x(a,b);else{if(!(a instanceof z.ke)){var g=null;a.py&&(g=a.yl());a=z.oe(z.Xa(a.yj?a.Hg():String(a)),g)}d+=z.me(a);a=a.yl();0==c?c=a:0!=a&&c!=a&&(c=null)}}var c=0,d="";z.x(arguments,b);return z.oe(d,c)};var oH=function(a,b){b.all=!0;return z.Rn(a,b)};var pH=function(){z.Sp.call(this,null,null,"搜索话题");this.Ge="";this.data=[z.pE[0]]};var qH=function(a,b){return window.$.post("/question/askpeople",{qid:a,uid:b,op:"remove"})};
var rH=function(a){return 1===a?!0:z.oa(a)?a[3]===z.X[3]:!1};
var sH=function(a){if(!tH.test("input"))throw Error("Invalid tag name \x3cinput\x3e.");if("INPUT"in uH)throw Error("Tag name \x3cinput\x3e is not allowed for SafeHtml.");var b=null,c="\x3cinput";if(a)for(var d in a){if(!tH.test(d))throw Error('Invalid attribute name "'+d+'".');var f=a[d];if(null!=f){var g;g=d;if(f instanceof gH)f=kH(f);else if("style"==g.toLowerCase()){if(!z.ua(f))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof f+" given: "+f);
if(!(f instanceof z.ie)){var h="",k=void 0;for(k in f){if(!/^[-_a-zA-Z0-9]+$/.test(k))throw Error("Name allows only [-_a-zA-Z0-9], got: "+k);var m=f[k];if(null!=m){if(m instanceof gH)m=kH(m);else if(vH.test(m)){for(var n=!0,q=!0,A=0;A<m.length;A++){var H=m.charAt(A);"'"==H&&q?n=!n:'"'==H&&n&&(q=!q)}n&&q||(m="zClosurez")}else m="zClosurez";h+=k+":"+m+";"}}f=h?(new z.ie).to(h):z.gE}f=f instanceof z.ie&&f.constructor===z.ie&&f.TK===z.je?f.dA:"type_error:SafeStyle"}else{if(/^on/i.test(g))throw Error('Attribute "'+
g+'" requires goog.string.Const value, "'+f+'" given.');if(g.toLowerCase()in wH)if(f instanceof lH)f=f instanceof lH&&f.constructor===lH&&f.gL===mH?f.tI:"type_error:TrustedResourceUrl";else if(f instanceof iH)f=f instanceof iH&&f.constructor===iH&&f.UK===jH?f.gk:"type_error:SafeUrl";else if(z.qa(f))f instanceof iH||(f=f.yj?f.Hg():String(f),xH.test(f)||(f="about:invalid#zClosurez"),h=new iH,h.gk=f,f=h),f=f.Hg();else throw Error('Attribute "'+g+'" on tag "input" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+
f+'" given.');}f.yj&&(f=f.Hg());g=g+'\x3d"'+z.Xa(String(f))+'"';c+=" "+g}}d=void 0;null!=d?z.oa(d)||(d=[d]):d=[];!0===yH.input?c+="\x3e":(b=nH(d),c+="\x3e"+z.me(b)+"\x3c/input\x3e",b=b.yl());(a=a&&a.dir)&&(b=/^(ltr|rtl|auto)$/i.test(a)?0:null);return z.oe(c,b)};var zH=function(a,b){var c=z.Qb(a,b,void 0);return 0<=c?(Array.prototype.splice.call(a,c,1),!0):!1};var AH=function(){z.R.call(this);this.uf="zm-pm-item"};
var BH=function(a){if(a.jb().length){var b=new z.Xv;b.use("locationSource",{param:function(a){return{start:a[a.length-1].getAttribute("data-token")}}});b.w(a.jt)}};var CH=function(a,b){z.U.confirm("删除私信","你确定要删除这封私信吗？",function(a){a&&DH(this,b)},a)};var DH=function(a,b){var c=new z.V(!0);a.v().Ba(c,"success",function(){var a=z.rf(c);a.r?z.U.message(a.msg):window.location.reload()});c.ajax("/inbox/delete","type\x3dsingle\x26token\x3d"+b)};var EH=function(){z.R.call(this);this.uf="zm-pm-item"};
var FH=function(a){var b=new z.V(!0);b.on("success",function(){var a=z.rf(b);a.r?z.U.message(a.msg):window.location.reload()});b.ajax("/inbox/delete","type\x3dthread\x26token\x3d"+a)};var GH=function(a,b,c,d,f){z.Hw.call(this,a,b,f);this.ox=c||"people";this.IN=d||["zg-follow","zg-unfollow"]};var HH=function(a,b,c,d){z.G.call(this);this.h=a;this.ox=b||"people";this.HN=c||["zg-btn-follow","zg-btn-unfollow"];this.text=d||["关注","取消关注"]};var IH=function(a){z.G.call(this);this.url=a||"/topic"};
var JH=function(a,b,c){var d=c[0],f="";"topic"!==d[0]&&d[3]&&(f='data-parent\x3d"'+d[3]+'"');b.html('\x3ca href\x3d"'+("topic"===d[0]?"/topic/"+d[2]+"/organize/entire":"javascript:;")+'" data-token\x3d"'+d[2]+'" '+f+' name\x3d"'+d[0]+'"\x3e'+d[1]+"\x3c/a\x3e\x3cul class\x3d'zm-topic-organize-list'\x3e\x3c/ul\x3e");"topic"!==c[0][0]&&b.addClass("zm-topic-organize-loadmore");b=(0,window.$)("ul",(0,window.$)(b));if(1<c.length)for(c=c[1],d=0;d<c.length;d++){var f=c[d],g=(0,window.$)("\x3cli\x3e").addClass("zm-topic-organize-item");
b.append(g);JH(a,g,f)}};var KH=function(a,b,c){z.Zr.call(this,a,b,c)};var LH=function(){z.R.call(this);var a=z.pE;this.Df=a[0][3];this.wk=a[0];this.Xv=a[4];this.Ny=a[5];this.$g="topic"};var MH=function(){var a=z.J("zh-topic-log-list");a&&((new GH(a,null,null,null,!0)).init(),(0,window.$)(a).on("click",'a[name\x3d"revert"]',z.Db(function(a){!1!==a&&z.BC(this)},z.FC({bq:!0}))).on("click",'.zm-item-meta a[name\x3d"report"]',function(){(new z.Aw("activity",(0,window.$)(this).data("id"))).submit();return!1}))};
var NH=function(a){if(z.J("zh-topic-admin-page-wrap")){var b=z.J("zh-topic-del-btn");b&&a.v().g(b,"click",a.CR)}};var OH=function(a,b){var c=z.Lf("li",null,a.Kv);z.x(c,function(a){a.getAttribute("data-token")===b[1]&&z.Q(a,!1)})};var PH=function(a){var b=z.J("zh-topic-followers-list-wrap");b&&(a=new GH(b,["/topic",(0,window.encodeURI)(a.wk[1]),"followers"].join("/"),null,["zg-btn-follow","zg-btn-unfollow"],!0),a.wi("zm-person-item"),a.init())};
var QH=function(a){var b=z.J("zh-topic-side-head");if(b){var c=z.L("zu-entry-focus-button",b);c&&a.v().g(c,"click",function(){(0,z.WD)(c,"topic","",["zg-btn-green","zg-btn-white"])});a.cg=z.J("zh-topic-operation-menu");a.cg&&a.v().g(a.cg,"click",a.SA)}if(b=z.J("zh-current-topic-bio")){var d=new z.Zr(!0,"/topic/bio/update","bio");z.$r(d,["tid\x3d"+a.Df]);d.Vb='\x3ca href\x3d"javascript:;" name\x3d"edit"\x3e你在 '+a.wk[0]+" 话题中的经验\x3c/a\x3e";d.pE=!0;d.w(b)}};var RH=function(a){z.ag(a,z.Yf('\x3ca href\x3d"/question/23261456" class\x3d"zg-link-gray-normal"\x3e\x3ci class\x3d"icon-info" style\x3d"vertical-align: -3px; margin-right: 6px"\x3e\x3c/i\x3e如何参与知乎话题的公共编辑？\x3c/a\x3e'))};
var SH=function(a){if(z.J("zh-topic-organize-page-wrap")){var b=z.J("zh-topic-organize-parent-editor");if(b)if(z.X.ys){var c=new z.$p(null,a.Df,!0);c.yt=!0;c.w(b);c.addEventListener("remove_tag",function(a){(a=a.data&&a.data.id)&&(0,window.$)("#wedge-"+a).remove()})}else RH(b);if(b=z.J("zh-topic-organize-child-editor"))z.X.ys?(c=new z.$p(null,a.Df,!1),c.yt=!0,c.w(b),(0,window.$)("a.entire-link").insertAfter(c.Ln).show()):RH(b);(0,window.$)("#zm-topic-manage-relation").on("change",'[type\x3d"checkbox"]',
function(){var a=(0,window.$)(this).closest("li").attr("id").split("-")[1];window.$.post("/topic/update",{action:"set_topic_edge",parent_topic_id:a,topic_id:z.pE[0][3],edge:this.checked^0}).done(function(a){if(!a)return z.U.message("网络异常");if(a.r)return z.U.message(a.msg)})});a.Jv=z.J("zh-topic-alias-input");new z.$l(a.Jv,"输入话题别名");a.Kv=z.J("zh-topic-alias-list");a.v().g(z.J("zh-topic-alias-container"),"click",a.wS);if(b=z.J("zh-topic-merge"))a.Ka=new pH,a.Ka.w(b);(b=z.J("zh-topic-merge-btn"))&&a.v().g(b,
"click",a.VR)}};var TH=function(){var a=z.J("zh-topic-organize-page-children");a&&(new IH("/topic/"+(0,window.encodeURIComponent)(z.pE[0][1])+"/organize/entire")).w(a)};var UH=function(a){var b=z.J("zh-topic-side-related-topics");b&&(a.xT=b,a.mA=new z.V(!1),a.v().g(a.mA,"complete",a.dS),a.mA.ajax("/topic/related?tid\x3d"+a.Df))};
var VH=function(a){if(z.X.PW)(0,window.$)("div.topic-avatar").addClass("disabled");else{var b=z.L("zm-entry-head-avatar-edit-button");if(b){var c=new z.Gz(2,z.pE[0][3]);c.w(b);var d=z.L("zm-avatar-editor-preview");z.F(c,"beforepost",function(){(0,window.$)("\x3cdiv class\x3d'avatar-edit-preview-loading topic'\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e").appendTo(d.parentNode)});z.F(c,"success",function(){window.$.post("/topic/"+z.pE[0][1]+"/avatar",{avatar_path:c.getData().url}).then(function(a){if(!a)return z.U.message("网络异常");
if(a.r)return z.U.message(a.msg);d&&(d.src=c.getData().url)}).always(function(){(0,window.$)(".avatar-edit-preview-loading").remove()})});a.v().g(c,"beforeopen",z.Db(z.FC({bq:!0}),z.Jm(z.p,!0)))}}};var WH=function(a){XH(a);YH(a);a.Xg&&a.v().g(a.Xg,"afterload",function(b){z.W.Ia({type:"ga_click_topic_more",data:b.data,target:a.Xg.$b})})};
var XH=function(a){var b=z.J("zh-topic-feed-list");if(b){var c=new z.Xv;a.M(c);c.use("locationSource",{gt:0,offset:function(a){return z.Hb(a).getAttribute("data-score")}});c.use("childConstructor",{factory:z.rC}).use("expandLimit");c.w(b);a.v().g(c,"click!",function(a){"comment"===a.namespace&&a.Mc.fill("category",this.$g).fill("label","topic_activity")})}};
var YH=function(a){var b=z.J("zh-topic-top-page-list");if(b){var c=new z.Xv({lh:!1});a.M(c);c.use("childConstructor",{factory:z.rC}).use("expandLimit");c.w(b);a.v().g(c,"click!",function(a){"comment"===a.namespace&&a.Mc.fill("category",this.$g).fill("label","topic_activity")})}};
var $H=function(a){function b(a){if(!a)return z.U.message("网络异常");if(a.r)return z.U.message(a.msg)}a.Ks=z.J("zh-topic-info-add");a.Ks&&a.v().g(a.Ks,"submit",a.OR);a.fG=z.L("zm-topic-info-content-main",a.h);a.fG&&a.v().g(a.fG,"click",a.MR);(0,window.$)("#zh-topic-manage-info-form").on("change",'input[type\x3d"radio"]',function(){window.$.post("/topic/"+z.pE[0][1]+"/information/manage",{info:(0,window.$)(this).val(),action:"change"}).done(b)});(0,window.$)("#zh-topic-manage-relation-form").on("change",
'input[type\x3d"radio"]',function(){window.$.post("/topic/update",{action:"set_topic_weaknode",topic_id:z.pE[0][3],weak:(0,window.$)(this).val()}).done(b)});(0,window.$)("#zh-topic-manage-lock-form").on("change",'[type\x3d"checkbox"]',function(){window.$.post("/topic/lock",{url_token:z.pE[0][1],lock_type:this.name,lock_value:(0,window.$)(this).is(":checked")?1:0}).done(b)})};var aI=function(a){z.R.call(this,a)};
var bI=function(a,b,c){var d,f,g=[];for(d in c)f=c[d],z.pa(f)?z.x(f,(0,z.r)(function(a){g.push(sH({type:"hidden",name:d,value:String(a)}))},a)):g.push(sH({type:"hidden",name:d,value:String(f)}));z.Df(b,nH(g))};var cI=function(a){return window.$.get("/node/ExploreAnswerListV2",{params:JSON.stringify({offset:a,type:"day"})})};var dI=function(a){return window.$.get("/node/ExploreHotFavlistsInnerV2",{params:JSON.stringify({offset:a})})};
var eI=function(a){return window.$.get("/node/ExploreAnswerListV2",{params:JSON.stringify({offset:a,type:"month"})})};var fI=function(){z.G.call(this)};var gI=function(){z.R.call(this);var a=z.vA||[0,0];this.ft=a[0];this.visible=!!a[1];this.$g="collection"};
var hI=function(a){var b=z.J("zh-list-answer-wrap");if(b){(0,window.$)(b).on("click","a[name\x3dunfavo]",window.$.proxy(a.mP,a));var c=new z.Xv({lh:!1});a.M(c);c.use("childConstructor",{cl:z.jC}).use("expandLimit");c.w(b);a.v().g(c,"click!",function(a){"comment"===a.namespace&&a.Mc.fill("category",this.$g).fill("label","collection_answer")})}};
var iI=function(){var a=z.J("zh-favlist-following-wrap");a&&((new GH(a,null,"favlist",null,!0)).init(),(0,window.$)(a).on("click","a.zg-unfollow",function(a){"/collections"===window.location.pathname&&(a=(0,window.$)(a.target).attr("href"),/\/collection\/\d+\/followers/.test(a)?z.zk({category:"collection",action:"visit_collection_followers",label:"collections_my_followed_collections_collection_followers_count"}):z.zk({category:"collection",action:"click_unfollow_collection",label:"collections_my_followed_collections_unfollow_collection"}))}).on("click",
".zm-item-title \x3e a",function(){var a=window.location.pathname;"/collections"===a?z.zk({category:"collection",action:"visit_collection",label:"collections_my_followed_collections_collection"}):"/collections/mine"===a&&z.zk({category:"collection",action:"visit_collection",label:"collections_my_collection"})}))};
var jI=function(a){var b=z.J("zh-list-side-head");if(b){var c=z.L("zu-entry-focus-button",b);c&&a.v().g(c,"click",function(){(0,z.WD)(c,"favlist","",["zg-btn-green","zg-btn-white"])});a.cg=z.J("zh-list-operation-menu");a.cg&&a.v().g(a.cg,"click",a.SA)}(b=z.J("zh-single-answer-author-info"))&&(new HH(b)).init();(b=z.J("zh-list-create-new-list"))&&a.v().g(b,"click",a.xU);(b=z.J("zh-fav-list-side-bar-creator"))&&(new HH(b)).init();if(b=z.J("zh-fav-list-side-bar-report")){var d=new z.Aw("favlist",a.ft);
z.Dw(d,b);d.mb(a)}};var kI=function(a){z.U.confirm("删除收藏夹","你确定要删除这个收藏夹吗？",function(a){a&&(a=new z.Kn,a.add("favlist_id",this.ft),a.add("_xsrf",(new z.Jh(window.document)).get("_xsrf")),(new aI).post(fH(a),"/collection/delete"))},a)};
var lI=function(a){a.wa||(a.wa=new z.fy(a.ft,"favlist"),a.M(a.wa),a.v().g(a.wa,"click!",function(a){"comment"===a.namespace&&(a.Mc.fill("category",this.$g).fill("label","collection"),a.Mc.action=a.Mc.action.replace("favlist","collection"))}),z.jy(a.wa,a.Mb,(0,window.$)(".toggle-comment",a.Mb)[0]))};var mI=function(a){a.ZJ=new z.V(!0);a.v().g(a.ZJ,"complete",function(){window.location.reload()});a.ZJ.ajax("/collection/update","favlist_id\x3d"+a.ft+"\x26is_public\x3d1")};
var nI=function(a,b){z.G.call(this);this.qa=a;this.Cb=b;this.data=z.bk};var oI=function(a){a.Gt&&a.Gt.ha(a.data.kb?"撤消匿名身份":"使用匿名身份")};var pI=function(a,b){return a?b?new z.Yz(a):new z.ew(a):new z.iw};var qI=function(a){a.ik.innerHTML="";z.Q(a.ik,!1);a.Do=!1;a.im.zp("问题重定向");z.Tj("/question/unredirect",null,"POST","qid\x3d"+a.qa+"\x26rqid\x3d"+a.lu)};var rI=function(a,b){z.R.call(this);this.pT=a;this.VC=b};var sI=function(a,b,c,d,f){z.es.call(this,d,b,c);this.qa=a;this.Oy=this.qp=!1;this.MS=f};
var tI=function(a,b){a.Oy=b};var uI=function(){var a=z.M("select",{style:"1px solid #999 "}),b=z.M("option",{value:"none"},"请选择一个修改理由...");a.appendChild(b);z.x(vI,function(b,d){var f=z.M("option",{value:b.value},d+1+". "+b.label);a.appendChild(f)});return a};var wI=function(a,b,c){a.mH.innerHTML=b;z.T.set(a.mH,c||"zg-error-text")};var xI=function(){z.R.call(this)};var yI=function(){z.S.call(this);this.zf(!0);this.G(!0)};
var zI=function(a,b){a.Wa("提问无人问津？");a.ha(b);a.ea();(0,window.$)(".js-gonext",a.h).on("click",function(){var b=(0,window.$)(this).parents('[class^\x3d"view"]').attr("class");"view-starting"===b?(a.Wa("第一条"),AI(a,"firsttip")):"view-firsttip"===b?(a.Wa("第二条"),AI(a,"secondtip")):"view-secondtip"===b?(a.Wa("第三条"),AI(a,"thirdtip")):"view-thirdtip"===b&&a.G(!1)})};var BI=function(a,b){a.Wa("邀请回答小窍门");a.ha(b);a.ea();(0,window.$)(".js-close",a.h).on("click",function(){a.G(!1)})};
var AI=function(a,b){(0,window.$)('[class^\x3d"view"]',a.h).hide();(0,window.$)(".view-"+b,a.h).show()};var CI=function(a,b){z.R.call(this);this.oT=a;this.ep=b;this.ba=null;this.Jb=!1;this.Sl=null;this.Hj=[];this.wc=!1;this.JQ="loading";this.qG="zg-btn-white"};
var DI=function(a){var b=a.JQ;a.K.addClass(b).html(EI);window.$.get("/node/QuestionInvitePanelV2",{params:{question_id:a.oT}}).done(function(c){a.wc=!0;a.K.removeClass(b);c=(0,window.$)(c);a.K.replaceWith(c);a.h=c[0];c.toggle(a.vc());a.K=c;FI(a)})};
var FI=function(a){var b=a.m();a.v().g(z.dk,"anon_change",a.oR);(0,window.$)(".cancel-anon",b).click(window.$.proxy(a.hO,a));if(!(0,window.$)(".error-message",b).length){var c=z.L("search-input",b),d=z.L("invite-title",b);a.uy(c,d);a.ov=(0,window.$)(".suggest-persons",b);a.ov.on("click","button",window.$.proxy(a.zF,a));(0,window.$)(".js-more",b).one("click",function(){(0,window.$)(".person",this.ov).show();(0,window.$)(this).remove()});a.uq=(0,window.$)(".invite-status",b);a.uq.on("click","button",
window.$.proxy(a.iO,a)).on("mouseenter mouseleave",".invited-shortlist",function(a){(0,window.$)(".invited-hovercard",this).toggleClass("in","mouseenter"===a.type)});GI(a)}};var HI=function(a,b){var c=z.bk;a.dispatchEvent(new z.Jx("click!invitation",{category:"invitation",action:"ask_to_answer",label:b,value:c.wG?null:c.we}))};var II=function(a,b){return!!z.Pb(a.Hj,function(a){return a.id===b})};
var JI=function(a,b,c){var d=(0,window.$)(".invite-button",a.ov).filter(function(){return this.getAttribute("data-uid")===b}).get(0);d&&KI(a,d,c)};var KI=function(a,b,c){a=a.qG;c?(z.T.add(b,a),z.vg(b,"收回邀请")):(z.T.remove(b,a),z.vg(b,"邀请回答"))};var GI=function(a){a.Hj=window.$.map((0,window.$)(".invited-fulllist",a.uq).children(),a.lI)};var LI=function(a,b){a.Hj&&zH(a.Hj,function(a){return a.id===b})&&MI(a)};
var MI=function(a){var b=a.Hj,c={each:z.x,fullList:function(){return(0,z.rs)(NI,{persons:b,helper:c})}};b.length?a.uq.html((0,z.rs)(OI,{persons:b,helper:c,maxInvites:15})):a.uq.html("你可以通过邀请其他用户来更快获得回答")};var PI=function(a){z.R.call(this);this.data=a;this.wa=null};var QI=function(a){var b=z.L("panel-container",a.h);b&&(a.am=new xI,a.M(a.am),a.am.w(b),a.wa=new z.fy(a.data.qa,"question"),a.am.M(a.wa),z.jy(a.wa,a.am.m(),(0,window.$)(".toggle-comment",a.h)[0]),a.Dj(),a.Ej(),RI(a))};
var RI=function(a){if("normal"===z.bk.status){var b=new CI(a.data.qa,a.data.ub);b.render(a.am.m());var c=(0,window.$)('a[name\x3d"invite"]',a.m());a.v().g(b,["expand","collapse"],function(a){c.text("expand"===a.type?"收起邀请":"邀请回答")});a.am.M(b);z.bk.AU&&(b.Jc(!0),a.dispatchEvent(new z.Jx("show!invitation",{category:"invitation",action:"ask_to_answer_card",label:""})));a.Hy=b}};
var SI=function(a,b){var c=a.sL;c||(c=new z.aA,c.w(z.J("zh-question-admin-menu")),z.nj(c,function(a){a.Fa(a.m().getAttribute("data-action"))}),a.v().g(c,"action",function(a){a=this.FC=a.target;(new z.Lx).open(a.m(),{id:this.data.qa,type:"question"},(0,z.r)(this.PM,this))}),a.sL=c);c.U()?c.G(!1):z.bA(c,new z.lw(b,1,!0),0,new z.di(5,0,5,0))};
var TI=function(a){z.U.confirm("删除问题","你确定要删除这个问题吗？相关的评论也将被删除。",function(a){if(a){var c=new z.V(!0);z.F(c,"complete",function(){var a=z.rf(c);a&&!a.r?window.location.href="/":z.U.message(a.msg)});c.ajax("/question/delete/"+this.data.qa)}},a)};var UI=function(a){z.IB.call(this,a)};var VI=function(a){z.G.call(this);this.Oz=a;this.K=(0,window.$)(this.Oz.html);this.ej=this.K[0];this.position=this.Oz.position||"top"};
var WI=function(a){a=a.getBoundingClientRect();a.width||(a.width=a.right-a.left,a.height=a.bottom-a.top);return a};
var XI=function(){function a(){(0,window.setTimeout)(function(){b.Eo&&b.ea()})}if(z.Fk.is_registered_via_web&&!z.Fk.is_answerer_prompt_dismissed){var b,c;z.NF.g("expand",function(d){var f=d.target;if(f instanceof z.jC){if(b)return a();c&&"pending"===c.state()||(c=window.$.post("/node/Guide2",{method:"unfold_answer_in_feed"}).then(function(a){(a=(0,window.$)(a.msg).html())&&(b=YI(a,f))}))}});z.NF.g("collapse",function(c){c.target instanceof z.jC&&b&&a()})}};
var ZI=function(a){var b=(0,window.$)("#tmpl-guidev2-answerer-tip").html();b&&YI(b,a)};
var YI=function(a,b){var c=new VI({html:a}),d=(0,window.$)(b.m()).find(".zm-item-answer-author-info .author-link");if(d.length){var f=function(a){b.dispatchEvent(Object.assign({type:"trackRequested",category:"popup_guide"},a))};c.g("show",function(){function a(){b.Zr()===c.target&&c.hide("hoverUserCard")}var b=z.hv.Y().V,c=this;b&&(b.g("beforeshow",a),c.Ba("hide",function(){b.pa("beforeshow",a)}))});c.g("show",function(){window.$.post("/node/Guide2",{method:"dismiss_answerer_prompt"});f({action:"popup_guide_view_people_appear"})});
c.g("hide",function(a){f({action:"popup_guide_view_people_fade",attributes:{fade_type:{click:"close",outOfView:"move_out",hoverUserCard:"hover_user_name"}[a.reason]}})});c.show(d);return c}};var $I=function(){z.R.call(this);this.data=z.bk||{};this.qa=this.data.qa;this.Do=!1;this.Qi={};this.Sv=[];this.Hq=[];this.ji=0;this.Xj=z.oE&&z.oE.url_token?z.oE:null};var aJ=function(a){z.X.bh&&window.$.post("/question/popup",{action:"no_answer",question_token:a.data.ub},function(a){a&&zI(new yI,a)})};
var bJ=function(a){(0,window.$)(".js-ignore-invite").click(function(){(0,window.$)(".question-invited-by").hide();window.$.post("/question/askpeople",{qid:a.data.ub,uid:z.X.$f,op:"pass"})});(0,window.$)(".js-invite-others").click(window.$.proxy(function(){var a=(0,window.$)('#zh-question-meta-wrap a[name\x3d"invite"]')[0];a&&(z.Sn(a,{RB:function(){return!1},Pv:!0}),this.Yt.Hy.Jc(!0))},a))};
var cJ=function(a){"close"!==z.bk.status&&(a.Ka=new z.Sp(a.data.Nm,a.data.qa),a.Ka.pt=5,a.Ka.st=1,a.Ka.IC=!0,a.Ka.yt=!0,a.Ka.w(z.L("zm-tag-editor",a.h)),a.v().g(a.Ka,["remove_tag","add_tag"],function(){z.W.Ia("ga_edit_question_topic_changed")}),a.v().g(a.Ka,"start_editing",function(){z.W.Ia("ga_question_topic_edit_finish_changed")}),a.Ka.addEventListener("beforeedit",z.FC({om:!0})))};
var dJ=function(a){var b=z.J("zh-question-title");"false"!==b.getAttribute("data-editable")&&(a.bd=new sI(a.data.qa,"/question/title","content",!1,!0),a.bd.pE=!0,a.bd.Id=!0,a.bd.qp=!0,tI(a.bd,rH(a.data.bh)),a.bd.w(b),a.v().g(a.bd,"change",function(){z.dk.dispatchEvent("question_title_change");window.document.title=this.bd.Xa()+" - 知乎"}),a.v().g(a.bd,"click_edit",function(){z.W.Ia("ga_question_title_edit_start")}),a.v().g(a.bd,"cancel_edit",function(){z.W.Ia("ga_question_title_edit_cancel")}),a.v().g(a.bd,
"save_changed",function(){z.W.Ia("ga_question_title_edit_save_changed")}),a.v().g(a.bd,"save_unchanged",function(){z.W.Ia("ga_question_title_edit_save_unchanged")}),a.bd.addEventListener("beforeedit",z.FC({om:!0})))};var eJ=function(a,b){z.X.qb()&&b?(fJ(a,"zh-question-detail",a.KP),fJ(a,"zh-question-answer-summary",a.NP)):(fJ(a,"zh-question-detail",z.p),fJ(a,"zh-question-answer-summary",z.p))};var fJ=function(a,b,c){if(b=z.J(b)){var d=new z.DB;a.v().g(d,"expand",c).g(d,"invalid",c);d.w(b)}};
var gJ=function(a){a.ID&&(a.data.fr=+a.ID.innerHTML,z.X.qb()||(a.data.fr=0),z.Q(a.Jh,0<a.data.fr),a.Iq&&z.vg(a.Iq,a.data.we?a.data.we+" 个回答":"还没有回答"),a.Jm&&z.Q(a.Jm,1<a.data.we),z.Q(a.Jh,0<a.data.fr))};
var hJ=function(a){var b=z.J("zh-question-answer-wrap");if(b){var c=new z.Xv({use:["expandLimit","nodeSource"],lh:a.data.we>a.data.SS&&!z.L("question-page-pager")});a.M(c);a.v().g(c,"itemcreated",function(a){c.M(iJ(this,a.item));(0,window.$)("img.lazy",a.item).lazyload({data_attribute:"actualsrc",threshold:400})});c.w(b)}};
var iJ=function(a,b,c){var d=new UI({qa:a.qa});d.mb(a);d.w(b);a.Qi[d.sa]=d;a.Hq.push(d.sa);a.v().g(d,"change",a.Az);d.Ne&&(a.ji=d.sa,d.ZL=z.X,a.v().g(d.ve,"change",a.UO),a.ML=d);d.Ij?d.Ne&&a.tn.appendChild(d.m()):a.Sv.push({added_time:d.yw,vote:c,aid:d.sa});d.di&&z.Q(d.m(),!1);return d};
var jJ=function(a){var b=null,c=null,d,f={suggest:"建议修改",evaluate:"建议修改",close:"关闭"};z.mE.$d||"normal"===z.bk.status||(c="被"+f[z.bk.status]+'的问题不允许添加新的回答。\x3ca data-tip\x3d"s$b$为什么部分问题会被「关闭」「建议修改」？" href\x3d"//www.zhihu.com/question/21290061 "\x3e\x3ci class\x3d"zg-icon zg-icon-question-mark"\x3e\x3c/i\x3e\x3c/a\x3e');a.ji?(d=a.Qi[a.ji],b="#answer-"+d.sa,d=d.di):a.Xj&&(b="/question/"+z.bk.ub+"/answer/"+a.Xj.url_token,d=a.Xj.is_delete);b&&(c=d?'你已经删除了对该问题的回答，如果需要修改，请先 \x3ca href\x3d"javascript:;" name\x3d"cancel_delete"\x3e撤消删除\x3c/a\x3e':
'一个问题你只能回答一次，但你可以对 \x3ca href\x3d"'+b+'"\x3e现有的回答\x3c/a\x3e 进行修改');!z.X.bh||a.ji||a.Xj||(c='添加回答：\x3ca href\x3d"javascript:;" name\x3d"answer_my_question"\x3e回答自己的提问\x3c/a\x3e');a.data.Ny&&(c='该问题目前已经被锁定，无法添加新答案。\x3ca href\x3d"/question/19604313" target\x3d"_blank"\x3e问题为什么会被锁定？\x3c/a\x3e');c&&a.vb.Za(!1,c)};
var kJ=function(a){a.Iq=z.J("zh-question-answer-num");a.Jq=z.J("zh-question-answer-wrap");a.Jh=z.J("zh-question-collapsed-link");a.tn=z.J("zh-question-collapsed-wrap");a.ID=z.J("zh-question-collapsed-num");a.UC=z.J("zh-question-answer-form-wrap");a.uk=z.J("zh-question-notification-summary");a.Jm=z.J("zh-answers-filter");a.Zt=z.J("zh-add-question-sug");a.Iq&&(a.data.we=+a.Iq.getAttribute("data-num"));a.Jq&&(a.data.SS=+a.Jq.getAttribute("data-pagesize"));a.Jh&&a.v().g(a.Jh,"click",a.NU);a.Zt&&a.v().g(a.Zt,
"click",a.wF);a.Jm&&z.HE&&a.v().g(a.Jm,"click",function(a){a.stopPropagation();z.T.add(this.Jm,"activated");this.v().Ba(window.document,"click",function(){z.T.remove(this.Jm,"activated")})})};var lJ=function(a,b){var c=z.J("zh-question-collapsed-switcher");b?(c.name="collap",a.HD=!0,z.Q(a.tn,!0),z.T.add(a.Jh,"zu-question-collap-title-active")):(a.HD=!1,c.name="expand",z.Q(a.tn,!1),z.T.remove(a.Jh,"zu-question-collap-title-active"))};
var mJ=function(a){a.JM=!0;var b=a.tn,c=window.$.get("/node/QuestionCollapsedAnswerListV2",{params:{question_id:a.data.qa}});c.done(function(c){c=z.Yf(c);lJ(a,!0);z.T.remove(b,"zm-question-collapsed-list-loading");b.appendChild(c);z.x(z.hg(b),function(b){b!==d&&iJ(a,b,99999)});(0,window.$)("img.lazy",b).lazyload({data_attribute:"actualsrc",threshold:400})});var d=z.hg(b)[0];d&&(z.Q(d,!1),c.done(function(){z.Q(d,!0)}));z.Q(b,!0);z.T.add(b,"zm-question-collapsed-list-loading")};
var nJ=function(a){if(a.UC){a.vb=new z.gB(a.data.kb,z.X);a.M(a.vb);a.vb.w(a.UC);z.mE.$d&&z.mE.$d.length?a.vb.ha(z.mE.$d[0]):!z.$A.lb&&z.B&&a.vb.ha("\x3cp\x3e\x3c/p\x3e");if(!(a.data.Ny||a.ji||a.Xj&&a.Xj.url_token))if(a.data.cn&&a.data.cn.length&&a.data.cn[3]!==z.X.$f)a.vb.Za(!1,"只有 "+z.vn(a.data.cn)+" 能回答此问题");else if("normal"===z.bk.status||z.mE.$d)z.X.bh||a.vb.Bf();a.v().g(a.vb,"change",a.nR);a.v().g(a.vb,"cancel_delete_answer",a.wR);a.vb.ready(function(){var a=this.Ax();a&&"writing"===window.location.hash.slice(1)&&
a.execCommand("toggleFullScreen")})}};var oJ=function(a,b){if(b=b||window.location.hash.slice(1)){var c=b.split("-"),d=c[1];"answer"===c[0]&&(c=a.dF(d))&&(c.Ij&&!a.HD?pJ(a,a.Jh):(pJ(a,c.m()),qJ(c)))}};var pJ=function(a,b){if(b){var c=z.Si(window.document.body).top,d=a.sP?z.Gi(a.uk).height:0,c={paddingTop:c+d};"number"===window.$.type(c)&&(c={offsetTop:c});c.RB=oH;z.Sn(b,c);z.Cn(b);a.mj&&a.mj.iq()}};var rJ=function(){$I.call(this);this.data=z.bk;this.qa=this.data.qa};
var sJ=function(a){var b=(0,window.$)(".awesome-answer-list").get(0);if(b){var c=new z.Xv({use:["expandLimit"],lh:!1});a.M(c);a.v().g(c,"itemcreated",function(a){var b=new z.jC;b.w(a.item);c.M(b)});c.w(b)}};var tJ=function(a,b){var c=(0,window.$)("#js-sidebar-author-info");if(!(0,window.$)("a[name\x3dfocus]",c).length){var d={0:"fullname",1:"url_token",2:"avatar_path",3:"hash",4:"headline"},f=z.Lb(z.X,function(a,b,c){a[d[c]]=b;return a},{}),f=(0,z.rs)(a.$L,{author:!b&&f});c.html(f)}};
var uJ=function(){var a=(0,window.$)("#zh-question-answer-collestions");a.length&&(0,window.$)("a[name\x3dfocus]",a).click(function(){(0,z.WD)(this,"favlist")})};var vJ=function(a){a.Cb?a.Cb.di?(a.Dr.innerHTML=a.Cb.Ne?'你已经删除了对该问题的回答，如果需要修改，请先 \x3ca href\x3d"javascript:;" name\x3d"cancel_delete"\x3e撤消删除\x3c/a\x3e':"此答案已经被作者删除",z.Q(a.Cb.m(),!1)):z.Q(a.Cb.m(),!0):a.Dr.innerHTML="此答案已经被作者删除"};var wJ=function(){z.R.call(this);this.page=1};var xJ=function(a,b){z.vg(a,b?"加载中...":"更多")};
var yJ=function(a,b){window.$.each(b,function(b,d){var f=new zJ;a.M(f);f.w((0,window.$)(d)[0]);a.bC.append(f.m());a.v().g(f,"unfollow",function(){AJ(a)})})};
var BJ=function(a){function b(a){g.hasClass("disabled")||(h.random(a)||(g.addClass("disabled"),(0,window.$)(".hidden-topics-plaza").show(),z.Y("topic","show_hidden_enter_topics_square","topic_feed_recommend")),d.html(z.Qz(h,h.be,h.fg)))}var c=(0,window.$)(a.m()),d=(0,window.$)(".js-list",c),f=(0,window.$)(".js-hidden-list",c),g=(0,window.$)(".js-pager",c),f=window.$.makeArray((0,window.$)("\x3cdiv\x3e").html(f.html()).children().add(d.children())),h=new z.Pz(f,3);g.on("click",function(){b(d.find(".zg-btn-follow").length)});
d.on("click","[data-follow]",function(c){var f=(0,window.$)(c.target),n=f.data("id"),q=(0,window.$)(".new-follow-topics span"),A=q.data("ids");if(f.hasClass("zg-btn-follow"))c=(0,window.$)(c.target).closest(".topic-item"),h.remove(c[0]),q.length?(A.push(n),q.data("ids",A),q.text(A.length)):(0,window.$)('\x3ca href\x3d"#" class\x3d"new-follow-topics"\x3e新关注 \x3cspan data-ids\x3d"['+n+']"\x3e1\x3c/span\x3e 个话题，点击查看\x3c/a\x3e').insertBefore((0,window.$)(".topic-recommend")),1===(0,window.$)(".zg-btn-follow",
d).length&&(g.hasClass("disabled")?(0,window.$)(".topic-recommend").fadeOut():(0,window.setTimeout)(function(){b(0)})),CJ(a);else if(f.hasClass("zg-btn-unfollow")){var H=(0,window.$)(".js-topic-item[data-id\x3d"+n+"]");H.length?H.fadeOut(function(){H.remove();AJ(a)}):A&&(1<A.length?(A.splice(A.indexOf(n),1),q.data("ids",A),q.text(A.length)):q.parent().remove(),AJ(a))}});c.on("click",".new-follow-topics",function(b){b.preventDefault();var c=(0,window.$)(b.target);window.$.get("/topic/newest-feeds",
{ids:JSON.stringify((0,window.$)("span",c).data("ids"))},function(b){b&&!b.r&&(yJ(a,b.msg),c.remove())})}).on("click",".js-nomore-recommend",function(){window.$.post("/topic/suggest-topics/close",function(a){a&&!a.r&&(0,window.$)(".topic-recommend").fadeOut()})})};var CJ=function(a){var b=(0,window.parseInt)(a.ev.text());DJ(a,b+1)};var AJ=function(a){var b=(0,window.parseInt)(a.ev.text());DJ(a,b-1)};var DJ=function(a,b){a.ev.text(b);(0,window.$)(".no-topics").toggle(0===b)};var zJ=function(){z.R.call(this)};
var EJ=function(){z.R.call(this)};var FJ=function(a){a.Of&&a.Of.H();var b=new z.rp;b.Ir=(0,z.qb)("pin-topic-moving").split(" ");z.sp(b,a.h,0);b.init();a.v().g(b,"dragend",(0,z.r)(a.Du,a));a.Of=b;(0,window.$)("a",a.h).each(function(){a.v().g(this,"mousedown",function(a){a.stopPropagation()})})};var GJ=function(a,b){return(0,window.$)(a.h).find("[data-topicid\x3d"+b+"]")};
var HJ=function(a,b){return window.$.post("/pin-topic/add",{tid:b},window.$.proxy(function(a){!a.r&&a.msg?((0,window.$)(this.h).append((0,window.$)(this.IT({topic:a.msg})).hide().fadeIn()),FJ(this)):z.U.message(a.msg)},a))};var IJ=function(a,b,c){var d=GJ(a,b);d.fadeOut(function(){d.remove();a.Du().done(function(a){c&&c(a)});a.dispatchEvent({type:"change",KJ:d.attr("data-topicid")});0===(0,window.$)(".js-pin-item").length&&(0,window.$)(".no-pin-topics").show()})};var JJ=function(){z.R.call(this)};
var KJ=function(a,b){var c;if(a&&b){c=c||"text-highlight";var d=new RegExp(b,"i");(0,window.$)(a).find("*").andSelf().contents().each(function(){if(3===this.nodeType){var a=this,g=a.parentNode;if(!z.T.has(g,c))for(var h,k;-1!==(h=a.data.search(d));)h=0<h?a.splitText(h):a,a=h.splitText(b.length),k=window.document.createElement("em"),k.className=c,k.appendChild(h.cloneNode()),g.replaceChild(k,h)}})}};var LJ=function(){z.R.call(this);this.zA=z.Fk.searchKeyword};
var MJ=function(){var a=(0,window.$)("#js-search-question-form");a.length&&a.submit(function(b){b.preventDefault();b=z.ls.Y();b.show();z.ms(b,(0,window.$)(".title-input",a).val())})};var NJ=function(a){var b=(0,window.encodeURIComponent)(a.zA);(0,window.$)("ul.list[data-paging]").on("click",".item a[href!\x3d#]",function(a){a=a.currentTarget;a.host&&(a=(0,window.$)(a).closest(".item").index()+1,z.tl.set("s-q",b),z.tl.set("s-i",a),z.tl.set("sid",(0,z.$E)()))})};
var OJ=function(a){function b(a,b){var h=(0,window.$)(a);window.$.each(b(),function(a,b){h.on("click",a,function(a){d.apply(null,c(b,a))})})}function c(a,b){return z.Kb(a,function(a){return z.ta(a)?a(b):a})}var d=z.Ca(z.Y,"search");b(".related-topics",function(){return{"a.avatar-link":["visit_topic","search_result_card_topic_avatar"],"a.name-link":["visit_topic","search_result_card_topic"],"a[href$\x3dquestions]":["visit_topic_questions","search_result_card_topic"],"a[href$\x3dtop-answers]":["visit_topic_topanswers",
"search_result_card_topic"],"a[href$\x3dfollowers]":["visit_topic_followers","search_result_card_topic"],"button.zg-btn-follow":["click_follow_topic","search_result_card_topic"],"button.zg-btn-unfollow":["click_unfollow_topic","search_result_card_topic"],'a[href^\x3d"/search?"]':["click_search_result_more","search_result_card_topic"]}});b(".related-users",function(){return{"a.avatar-link":["visit_people_profile","search_result_card_people_avatar"],"a.name-link":["visit_people_profile","search_result_card_people"],
"a[href$\x3danswers]":["visit_people_answers","search_result_card_people"],"a[href$\x3dfollowers]":["visit_people_followers","search_result_card_people"],"a[href$\x3dposts]":["visit_people_posts","search_result_card_people"],"button.zg-btn-follow":["click_follow_people","search_result_card_people"],"button.zg-btn-unfollow":["click_unfollow_people","search_result_card_people"],'a[href^\x3d"/search?"]':["click_search_result_more","search_result_card_people"]}});b(window.document.body,function(){var a=
z.Ca(z.Na,"search_result_%s_more_button");return{"ul.list.questions + .zu-button-more":["click_search_result_more",a("all")],"ul.list.users + .zu-button-more":["click_search_result_more",a("user")],"ul.list.topics + .zu-button-more":["click_search_result_more",a("topic")]}});b(".search-tabs",function(){var a=z.Ca(z.Na,"search_result_tab_%s");return{'a[href^\x3d"/search?type\x3dquestion"]':["click_search_result_tab",a("all")],'a[href^\x3d"/search?type\x3dpeople"]':["click_search_result_tab",a("user")],
'a[href^\x3d"/search?type\x3dtopic"]':["click_search_result_tab",a("topic")]}});b(".range-selector",function(){var a=z.Ca(z.Na,"search_result_range_%s");return{'a[href*\x3d"range\x3d1d"]':["click_search_result_range",a("1d")],'a[href*\x3d"range\x3d1w"]':["click_search_result_range",a("1w")],'a[href*\x3d"range\x3d3m"]':["click_search_result_range",a("3m")]}});b("ul.list.questions",function(){function a(){return function(a){return"search_result_all_list_"+((0,window.$)(a.target).closest(".item").index()+
1)+""}}return{"a.question-link":["visit_question",a()],".js-expand, .summary":["click_expand",a()],'a[name\x3d"collapse"]':["click_collapse_answer",a()],"a.zg-follow":["click_follow_question",a()],"a.zg-unfollow":["click_unfollow_question",a()]}});b("ul.list.users",function(){function a(b){return function(a){return"search_result_user_list_"+((0,window.$)(a.target).closest(".item").index()+1)+(b||"")}}return{"a.avatar-link":["visit_people_profile",a("_avatar")],"a.name-link":["visit_people_profile",
a()],"a[href$\x3danswers]":["visit_people_answers",a()],"a[href$\x3dfollowers]":["visit_people_followers",a()],"a[href$\x3dposts]":["visit_people_posts",a()],"button.zg-btn-follow":["click_follow_people",a()],"button.zg-btn-unfollow":["click_unfollow_people",a()]}});b("ul.list.topics",function(){function a(b){return function(a){return"search_result_topic_list_"+((0,window.$)(a.target).closest(".item").index()+1)+(b||"")}}return{"a.avatar-link":["visit_topic",a("_avatar")],"a.name-link":["visit_topic",
a()],"a[href$\x3dquestions]":["visit_topic_questions",a()],"a[href$\x3dfollowers]":["visit_topic_followers",a()],"button.zg-btn-follow":["click_follow_topic",a()],"button.zg-btn-unfollow":["click_unfollow_topic",a()]}});a.v().g(a,"click!",function(a){"comment"===a.namespace&&a.Mc.fill("category","search").fill("label","search_result_answer")})};var PJ=function(a){QJ||(this.Pn=a,this.xh=(0,window.$)(this.Pn.m()),(0,window.setTimeout)((0,z.r)(this.Eb,this)))};
var RJ=function(a){(0,window.setTimeout)(function(){window.$.ajax({type:"POST",url:"/zreactor/deliver",data:JSON.stringify(a),contentType:"application/json",processData:!1})},50)};
var SJ=function(a){var b=TJ[a.xh.data("type")];z.uk(a.xh[0],function(){UJ(a,"display")},a.Pn);a.Pn.v().g(a.Pn,"expand",function(c){c.target instanceof z.Vy&&UJ(a,"expand_"+b)}).g(a.Pn,"collapse",function(c){c.target instanceof z.Vy&&UJ(a,"collapse_"+b)});a.xh.on("click",'a[name\x3d"nohelp"]',function(){var b=!!(0,window.$)(this).data("revert");UJ(a,b?"unhelpful":"revert_unhelpful");(0,window.$)(this).data("revert",!b)});window.$.each({".actioncard-body .more":"view_all",".actioncard-body .next:not(.disabled)":"next_page",
".actioncard-body .prev:not(.disabled)":"prev_page",".actioncard-body .items a":"open_topic",".js-validate, .js-headline-input, .js-choose-image":"open_form",'.zg-follow[data-follow^\x3d"t:"], .zg-btn-follow[data-follow^\x3d"t:"]':"follow_topic",'.zg-unfollow[data-follow^\x3d"t:"], .zg-btn-unfollow[data-follow^\x3d"t:"]':"unfollow_topic",'a.zg-follow:not([data-follow^\x3d"t:"]):not([data-follow^\x3d"m:"])':"follow_"+VJ[b],'a.zg-unfollow:not([data-follow^\x3d"t:"]):not([data-follow^\x3d"m:"])':"unfollow_"+
VJ[b],"a.toggle-comment":"expand_comments",'a[name\x3d"addnew"]':"comment",".content h2 a":"open_"+WJ[b],"a.ignore:not(.close)":"uninterest","a.revert":"revert_uninterest","a.ignore.close":"confirm_uninterest","button.up.pressed":"vote_up_"+b,"button.down.pressed":"vote_down_"+b,"button.up:not(.pressed)":"revert_vote_up_"+b,"button.down:not(.pressed)":"revert_vote_down_"+b,'a[name\x3d"favo"]':"collect_answer",'a[name\x3d"thanks"]':"thanks",'a[name\x3d"share"]':"share",'a[name\x3d"report"], .js-report':"report",
"a.answer-date-link":"open_answer"},function(b,d){a.xh.on("click",b,function(){UJ(a,d)})})};var UJ=function(a,b){var c=window.$.extend({},XJ(a),{action_type:b,time:(0,z.w)()});c.object_id&&("display"===b?a.dT(c):RJ(c))};
var XJ=function(a){var b=a.fC,c=window.$.extend({},b.data("meta"),{create:a.xh.find(".source .time").data("timestamp"),offset:(0,window.$)(".feed-item").index(a.xh)+1});return{mid:z.Fk.ga_vars.user_hash,object_type:TJ[a.xh.data("type")],object_id:b.data("id"),object_meta:c,context:YJ,others:""}};var ZJ=function(a,b,c){z.Hw.call(this,a,b,c)};var $J=function(){z.R.call(this);this.Je=[];this.dm=0;this.qQ=!!(0,window.$)("#is-topstory").length;this.PE="feed-item-hook"};
var aK=function(a){var b="/node/"+a.Ad.data("init").nodename,b=a.ut=new ZJ(a.Kr,b,!0);a.v().g(b,"itemcreated",function(a){this.Je.push(a.data.tQ)}).g(b,"ignore",function(a){bK(this,a.key,a.value)});b.wi(a.PE);b.mb(a);b.init();if(a.Ad.data("delayed"))z.dk.on("guider2:topicselected",(0,z.r)(b.Xl,b))};var cK=function(a){a.Ad.on("click",".js-more-similar",function(){(0,window.$)(this).parent().slideUp("fast").nextUntil(":not(.hidden)").slideDown("fast")})};
var bK=function(a,b,c){a.Je.forEach(function(a){a.Mr[b]===c&&(0,window.$)(a.h).fadeOut(150)})};var dK=function(a){a.Ad.on("click contextmenu","a",function(a){var c=a.currentTarget.href,d=c.includes("topic/"),c=c.includes("people/");if(d||c)if("click"!==a.type||a.ctrlKey||a.metaKey)c="",c="contextmenu"===a.type?"contextmenu":a.ctrlKey?"ctrl_click":"meta_click",z.zk({category:"open_link_in_new_tab",action:c,label:d?"topic":"people"})})};var eK=function(){z.G.call(this);this.iy=[];this.kE=[]};
var fK=function(a){for(var b=[],c=0;3>c;c++){var d=a.kE.shift();d&&b.push(d)}3===b.length?(a.kt.innerHTML=b.join(""),gK(a)):hK(a)};var gK=function(a){var b=z.Nf("suggest-item",a.kt);z.x(b,function(a){this.iy.push(a.id.split("-")[1])},a)};var hK=function(a){a.kt.innerHTML='\x3cimg class\x3d"bubble-loading" src\x3d"'+z.$A.fB+'/img/noti-loading.gif"\x3e';window.$.post("/lookup/suggest_member",{ids:a.iy.join(",")}).done((0,z.r)(a.zR,a))};var iK=function(){this.interval=3E4};
var jK=function(a){a.Td||(a.Td=(0,window.setInterval)((0,z.r)(function(){kK()},a),a.interval))};var kK=function(){(0,window.$)(".feed-item-hook .time").each(function(){(0,window.$)(this).text(z.it((0,window.$)(this).data("timestamp")))})};var lK=function(){z.R.call(this)};
var mK=function(){var a=(0,window.$)("#js-global-notify");if(a.length){var b=new z.wr;b.w(a[0]);eH(b);(0,window.$)(".zu-global-notify-close",a).click(function(){var c=(0,window.$)(this).data("id");window.$.post("/notice/read",{nid:c});b.H();a.remove()})}};var nK=function(){z.R.call(this)};var oK=function(){z.R.call(this);this.$g="explore";this.DN="explore_feed"};
var pK=function(a){var b=(0,window.$)("#js-explore-tab");if(b.length){var c=(0,window.$)(".tab-panel",b),d=(0,window.$)(".tab-nav",b),f=null;d.children().click(function(){f=z.Rf(window.document)});b=function(){var b={"daily-hot":0,"monthly-hot":1}[window.location.hash.slice(1)]||0;d.removeClass("active").eq(b).addClass("active");b=c.hide().eq(b).show().children("[data-type]");if(!b.data("inited")){b.data("inited",!0);var h={daily:cI,monthly:eI}[b.data("type")],h=new qK(h);h.use("expandLimit");a.M(h);
h.w(b[0])}f&&window.scrollTo(f.x,f.y)};a.v().g(window,"hashchange",b);b()}};var rK=function(a){var b=(0,window.$)("#zh-recommend-list-full\x3e.zh-general-list")[0];if(b){var c=new z.Xv;c.use("nodeSource");z.Tv(c,function(a){var b=z.rC(a);b&&(c.M(b),b.w(a))});a.M(c);c.w(b)}};
var sK=function(){function a(a,b,c,d,m){c=(0,window.$)(c.target).closest(d,c.delegateTarget).index();z.Ck(a,b,m,c+1)}var b=z.Ca(a,"view_answer","visit_answer"),c=z.Ca(a,"view_topic","visit_topic"),d=z.Ca(a,"view_roundtable","visit_roundtable");(0,window.$)("#zh-recommend").on("click","a.question_link",function(a){b(a,".feed-item","editor_recommendations_question_title")});(0,window.$)('div[data-type\x3d"daily"]').on("click","a.question_link",function(a){b(a,".feed-item","daily_trending_question_title")});
(0,window.$)('div[data-type\x3d"monthly"]').on("click","a.question_link",function(a){b(a,".feed-item","monthly_trending_question_title")});(0,window.$)("ul.hot-topics").on("click",'a[href*\x3d"topic"]',function(a){c(a,"li","explore_sidebar_trending_topics_name")});(0,window.$)("ul.hot-roundtables").on("click",'a[href*\x3d"roundtable"]',function(a){d(a,"li","explore_sidebar_trending_roundtable")});(0,window.$)("ul.hot-topics").on("click","img.avatar",function(a){c(a,"li","explore_sidebar_trending_topics_avatar")})};
var qK=function(a){z.Sv.call(this,{source:tK(a),use:["autoload"]})};var tK=function(a){return function(){return a((0,window.$)(this.jb()).last().data("offset")).then(function(a){return{results:a}})}};var hH={};z.sC.prototype.GA=z.ca(22,function(a){this.sn=a});z.Zr.prototype.Ax=z.ca(20,function(){return this.Oa});z.ke.prototype.yl=z.ca(2,function(){return this.qE});gH.prototype.yj=!0;gH.prototype.Hg=function(){return this.jB};gH.prototype.toString=function(){return"Const{"+this.jB+"}"};
var jH={},mH={};iH.prototype.yj=!0;iH.prototype.Hg=function(){return this.gk};iH.prototype.py=!0;iH.prototype.yl=function(){return 1};var vH=/^[-,."'%_!# a-zA-Z0-9]+$/;lH.prototype.yj=!0;lH.prototype.Hg=function(){return this.tI};lH.prototype.py=!0;lH.prototype.yl=function(){return 1};
var xH=/^(?:(?:https?|mailto|ftp):|[^&:/?#]*(?:[/?#]|$))/i,wH={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},yH={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},tH=/^[a-zA-Z0-9-]+$/,uH={EMBED:!0,IFRAME:!0,LINK:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,TEMPLATE:!0};z.v(pH,z.Sp);z.e=pH.prototype;z.e.w=function(a){this.h=a;this.jg=z.L("zm-tag-editor-labels",this.h);this.Le(!0);this.ye();this.dc()};
z.e.Nn=function(){this.Tc||(this.Tc=z.M("div","zm-tag-editor-editor",[this.Ln=z.M("div","zg-section zg-clear"),this.ef=z.M("div","zg-section zm-tag-editor-command-buttons-wrap",[this.nb=z.J("zh-topic-merge-input"),z.M("a",{"class":"zg-mr15 zg-btn-blue",href:"#",name:"add",style:"display:none;"},"添加"),this.SE=z.J("zh-topic-merge-btn")])]),z.dg(this.Tc,this.jg),this.Mg(this.ef))};
z.e.Mg=function(a){this.ca=new z.Rp("/topic/autocomplete",this.nb,null,null,a,!0);this.ca.kh(!0);this.ca.Yl=this.Me;this.ca.Ep(this.tm());this.ca.bx=[this.Ge];this.v().g(this.ca,"select",this.Ro);this.v().g(this.ca,"suggestionsupdate",this.Gv)};z.e.tm=function(){return(0,z.r)(function(a){return z.Jb(a,function(a){return z.Nb(this.data,function(c){return c[1]!==a[1]&&3<a.length})},this)},this)};z.e.Ro=function(){var a=this.ca.pj().slice(1);a&&3<a.length&&(this.fE=a,this.Ye(a[3],a[0]))};
z.e.Ye=function(a,b){var c=this;(0,window.setTimeout)(function(){c.nb.value=b})};z.e.Qe=function(){};z.ka(AH,z.R);
AH.prototype.init=function(){this.jt=z.J("zh-pm-detail-item-wrap");this.v().g(this.jt,"click",this.Pa);var a=z.J("zh-pm-editor-form");this.Re=new z.dv({jp:!0});if(a){this.Re=new z.dv({jp:!0});this.Re.jq=!1;this.Re.ih(a);this.Re.show();if(a=this.jb()[0]){var a=(0,window.$)(a).data(),b=this.Re,c=a.type;b.Wp=a.token;b.pB=c;z.fv(this.Re,a.member,a.name)}else a=z.Fs,z.fv(this.Re,a.id,a.ux);this.Re.focus()}BH(this);this.Dj()};
AH.prototype.Dj=function(){(0,window.$)('a[name\x3d"report"]').each(function(a,b){var c=(0,window.$)(b).closest(".zm-pm-item").data("token");z.Dw(new z.Aw("message",c),b)})};AH.prototype.jb=function(){return z.hg(this.jt)};
AH.prototype.Pa=function(a){var b=z.Jn(this.jt,a.target);if(b&&(a=z.Lg(b,this.uf))){a=(0,window.$)(a).data();var c=a.token;switch(b.name){case "reply":this.Re.show();var b=this.Re,d=a.type;b.Wp=c;b.pB=d;z.fv(this.Re,a.member,a.name,!1);this.Re.focus();break;case "delete":CH(this,c)}}};z.ka(EH,z.R);
EH.prototype.init=function(){var a=z.J("zh-create-pm");a&&this.v().g(a,"click",this.yR);var a=z.J("zh-pm-item-wrap"),b=new z.Xv;b.use("locationSource",{param:function(a){return{start:a[a.length-1].getAttribute("data-token")}}});b.w(a);this.v().g(a,"click",this.Pa);(0,window.$)(function(){(0,window.$)("#zh-change-pm-admin").change(function(){var a=(0,window.$)(this).find("option:selected").attr("data-token");window.location.href="self"===a?"/admin_feedback":"/admin_feedback/"+a})});(0,window.$)('a[name\x3d"report"]').each(function(a,b){var f=
(0,window.$)(b).closest(".zm-pm-item").data("report-token");z.Dw(new z.Aw("message",f),b)})};EH.prototype.yR=function(){var a=new z.dv({jp:!0});a.show();z.fv(a,-1);z.gb(window.location.pathname,"admin_inbox")?a.Hp("admin"):a.Hp((0,window.$)("#zh-change-pm-admin option:selected").attr("data-token"))};
EH.prototype.Pa=function(a){var b=z.Jn(this.vX,a.target);if(b){a=b.name;b=z.Lg(b,this.uf);if(!b||!a)return!0;var c=(0,window.$)(b).data(),d=c.member,f=c.name;switch(a){case "reply":z.Jm((0,z.r)(function(){var a=new z.dv({jp:!0});a.show();var b=c.type;a.Wp=c.token;a.pB=b;z.fv(a,d,f,!1);a.pd.focus()},this),!0)();break;case "delete":var g=b.getAttribute("data-token");z.U.confirm("删除私信会话","你确定要删除与 "+f+"的所有会话吗？",function(a){a&&FH(g)},this);break;case "edit":z.An(this.ad,this.uh),this.Mm=-1}}};z.v(GH,z.Hw);GH.prototype.init=function(a){GH.o.init.call(this,a);this.dc(this.h)};GH.prototype.NB=function(a){this.NB=a};GH.prototype.dc=function(a){if(this.NB){var b=new z.sC,c=this.IN;b.rx=this.ox;b.qx=c||b.qx;this.sn&&b.GA(this.sn);b.w(a)}};GH.prototype.GA=function(a){this.sn=a};z.v(HH,z.Cl);HH.prototype.init=function(){this.v().g(this.h,"click",this.To)};HH.prototype.To=function(a){a=z.Jn(this.h,a.target);"focus"===(a&&a.name)&&(0,z.WD)(a,this.ox,null,this.HN,{follow_text:this.text[0],unfollow_text:this.text[1]})};z.v(IH,z.Cl);z.e=IH.prototype;z.e.w=function(a){this.element=a;var b=(0,window.$)("\x3cul\x3e");this.PJ=(0,window.$)("\x3cli\x3e");b.append(this.PJ);(0,window.$)(a).append(b);this.QJ||(this.QJ=!0,this.BB=new z.V(!0),this.v().Ba(this.BB,"success",this.GR),this.BB.ajax(this.url,null,"POST"))};z.e.GR=function(){var a=z.rf(this.BB);a&&(a&&a.r?z.U.message(a.msg):(JH(this,this.PJ,a.msg),this.QJ=!1,this.D()))};z.e.D=function(){this.v().g(this.element,"click",this.To)};
z.e.To=function(a){var b=(a=a.target)?a.name:"";if(b)switch(b){case "load":case "loadmore":if(!this.Jo){var b=a.getAttribute("data-token"),c=a.getAttribute("data-parent");this.Jo=!0;this.Sj=new z.V(!0);this.v().Ba(this.Sj,"success",this.Dq);this.CA=a.parentNode;this.CA.innerHTML='\x3cspan class\x3d"zg-gray"\x3e加载中...\x3c/a\x3e';this.Sj.ajax(this.url+"?child\x3d"+b+"\x26parent\x3d"+c,null,"POST")}break;case "topic":window.location.href=a.href}};
z.e.Dq=function(){var a=z.rf(this.Sj);if(a)if(a&&a.r)z.U.message(a.msg);else if(a=a.msg,a[1]){(0,window.$)(this.CA).hide();for(var b=(0,window.$)(this.CA.parentNode),c=0;c<a[1].length;c++){var d=a[1][c],f=(0,window.$)("\x3cli\x3e").addClass("zm-topic-organize-item");"topic"!==d[0][0]&&f.addClass("zm-topic-organize-loadmore");b.append(f);JH(this,f,d)}this.Jo=!1}};z.v(KH,z.Zr);KH.prototype.Zg=function(a){z.pE[0][0]===a?this.Ai():KH.o.Zg.apply(this,arguments)};KH.prototype.MC=function(a){if(a=z.rf(a.target))a.r?z.U.message(a.msg):a.msg&&(window.location.href=a.msg)};z.v(LH,z.R);z.e=LH.prototype;z.e.init=function(){z.NF.M(this);this.w(window.document.body)};
z.e.D=function(){LH.o.D.call(this);QH(this);var a=z.J("zh-topic-top-answerer");a&&(new HH(a,"people",["zg-follow","zg-unfollow"])).init();if(a=z.J("zh-topic-direct-question-list"))a=new GH(a,null,"question",null,!0),a.wi("question-item"),a.init();if(a=z.J("zh-topic-title"))this.bd=new KH(!1,"/topic/update","title"),z.$r(this.bd,["tid\x3d"+this.Df]),this.bd.addEventListener("beforeedit",z.FC({bq:!0})),this.bd.w(a),(0,window.$)(a).on("click",".js-pin",function(){var a=(0,window.$)(this),b=a.attr("data-action");
window.$.post(b,{tid:z.pE[0][3]}).done(function(b){if(!b)return z.U.message("网络异常");if(b.r)return z.U.message(b.msg);b=a.hasClass("pin")?'\x3ca href\x3d"javascript:;" data-action\x3d"/pin-topic/remove" class\x3d"js-pin zg-gray unpin topic-hover-content"\x3e\x3ci class\x3d"z-icon-unpin"\x3e\x3c/i\x3e取消常去话题\x3c/a\x3e':'\x3ca href\x3d"javascript:;" data-action\x3d"/pin-topic/add" class\x3d"js-pin zg-gray pin topic-hover-content"\x3e\x3ci class\x3d"z-icon-pin"\x3e\x3c/i\x3e设为常去话题\x3c/a\x3e';a.replaceWith(b)})});
if(a=z.J("zh-topic-desc"))(0,window.$)(a).find(".zm-editable-content").data("editable-maxlength"),this.gl=new z.es(!0,"/topic/update","description"),this.gl.Vb='\x3ca href\x3d"javascript:;" name\x3d"edit"\x3e添加话题描述\x3c/a\x3e\x3c/div\x3e',z.$r(this.gl,["tid\x3d"+this.Df]),this.gl.$q=!1,this.gl.bK=!1,this.gl.addEventListener("beforeedit",z.FC({bq:!0})),this.gl.w(a);if(a=z.J("zh-topic-faq"))this.jx=new z.es(!0,"/topic/"+(0,window.encodeURIComponent)(z.pE[0][1])+"/faq","content"),this.jx.Vb='\x3cdiv class\x3d"zm-topic-faq-container"\x3e\x3cdiv class\x3d"zg-gray-normal"\x3e常见问题是该话题下经常会提到的问题的整理，以便后来者查阅（\x3ca href\x3d"/question/20388061" class\x3d"zg-link-litblue"\x3e如何创建？\x3c/a\x3e）\x3c/div\x3e\x3ca href\x3d"javascript:;" name\x3d"edit" class\x3d"zg-link-litblue"\x3e\x3cspan class\x3d"zg-blue-edit"\x3e\x3c/span\x3e为「'+
z.pE[0][0]+"」添加常见问题\x3c/a\x3e\x3c/div\x3e",this.jx.$q=!1,this.jx.w(a);VH(this);WH(this);PH(this);SH(this);TH();UH(this);NH(this);MH();(a=z.L("zm-topic-search-input-new"))&&new z.$l(a,"在话题中搜索");var b=(0,window.$)(a);z.$A.lb||b.focus(function(){b.addClass("stretch-to")}).blur(function(){b.removeClass("stretch-to")});(a=z.L("zm-topic-ask-in-topic"))&&this.v().g(a,"click",this.PA);(a=z.L("zm-topic-feed-container"))&&(new HH(a,"question",["zg-follow","zg-unfollow"])).init();(a=z.J("zh-topic-side-children-list"))&&
(new HH(a,"topic",["zg-follow","zg-unfollow"])).init();$H(this);(a=z.J("zh-topic-info-add"))&&z.x(z.hg(a),function(a){var b;a&&a.getAttribute&&(b=a.getAttribute("data-placeholder"))&&new z.$l(a,b)});(0,window.$)(".js-may-disable").click(z.Jm(z.p,!0))};
z.e.VR=function(){this.sr=this.Ka.fE;if(!this.lH&&this.sr){this.lH=!0;this.nz=new z.V(!0);this.v().Ba(this.nz,"success",this.yL);this.nz.ajax("/topic/"+(0,window.encodeURIComponent)(z.pE[0][1])+"/demand","action\x3dmerge\x26target_topic_id\x3d"+this.sr[3]);var a=z.J("zh-topic-merged-msg");z.Q(z.J("zh-topic-merge"),!1);z.Q(a,!0);a=z.Lf("a",null,a)[0];a.href="/topic/"+this.sr[1];a.innerHTML=this.sr[0];this.Ka&&(this.Ka.nb.value="")}};
z.e.yL=function(){var a=z.rf(this.nz);if(!a)return z.U.message("网络异常");if(a.r)return z.U.message(a.msg);this.lH=!1};z.e.CR=function(){this.mE||(this.mE=!0,this.Jw=new z.V(!0),this.v().Ba(this.Jw,"success",this.wL),this.Jw.ajax("/topic/"+(0,window.encodeURIComponent)(z.pE[0][1])+"/demand","action\x3dremove"))};
z.e.wL=function(){var a=z.rf(this.Jw);if(!a)return z.U.message("网络异常");if(a.r)return z.U.message(a.msg);a=z.J("zh-topic-del-msg");z.Q(z.J("zh-topic-del-btn"),!1);z.Q(a,!0);this.Ka&&(this.Ka.nb.value="");this.mE=!1};
z.e.wS=function(a){if((a=a.target)&&a.name)if("add"===a.name){if(a=this.Jv.value)this.Lv=new z.V(!0),this.v().Ba(this.Lv,"complete",this.vL),this.Lv.ajax(window.location.href,"action\x3dadd_alias\x26alias\x3d"+(0,window.encodeURIComponent)(a))}else"remove"===a.name?(this.nA=new z.V(!0),a=a.parentNode.getAttribute("data-token"),this.v().Ba(this.nA,"complete",this.AL),this.nA.ajax(window.location.href,"action\x3dremove_alias\x26alias_token\x3d"+a)):"remove-merged"===a.name&&(this.oA=new z.V(!0),a=a.parentNode.getAttribute("data-token"),
this.v().Ba(this.oA,"complete",this.BL),this.oA.ajax("/topic/"+(0,window.encodeURIComponent)(z.pE[0][1]+"/demand"),"action\x3dremove\x26target_topic_id\x3d"+a))};z.e.BL=function(){var a=z.rf(this.oA);if(!a)return z.U.message("网络异常");if(a.r)return z.U.message(a.msg);OH(this,a.msg)};z.e.AL=function(){var a=z.rf(this.nA);if(!a)return z.U.message("网络异常");if(a.r)return z.U.message(a.msg);OH(this,a.msg)};
z.e.vL=function(){var a=z.rf(this.Lv);if(!a)return z.U.message("网络异常");if(a.r)return z.U.message(a.msg);var a=a.msg,b=z.M("li");b.setAttribute("data-token",a[1]);b.innerHTML=a[0]+' \x3ca name\x3d"remove" href\x3d"javascript:;" class\x3d"zg-link-gray"\x3e移除\x3c/a\x3e';this.Kv.appendChild(b);this.Jv.value="";z.Q(this.Kv.parentNode,!0)};
z.e.SA=function(a){this.Nz?this.fb.U()?this.fb.G(!1):(this.fb.G(!0),a.stopPropagation(),a.preventDefault(),this.Sk()):(a.stopPropagation(),a.preventDefault(),this.Cj(),this.Sk());this.Nz=!0};z.e.Sk=function(){this.v().Ba(window.document,"click",function(){this.fb.G(!1)})};
z.e.Cj=function(){var a=z.J("zh-topic-side-head"),b=this.cg.getAttribute("data-auth");this.fb=new z.jw;this.ey=!0;"f-topic-manage"===b&&this.fb.Ha(this.BS=new z.ew("管理话题"));this.fb.Ha(this.CS=new z.ew("组织话题"));this.fb.Ha(this.AS=new z.ew("话题日志"));this.ey&&(this.fb.render(a),this.v().g(this.fb,"action",this.uj))};z.e.uj=function(a){var b="";a.target===this.BS?b="admin":a.target===this.CS?b="organize":a.target===this.AS&&(b="log");window.location.href=["/topic",this.wk[1],b].join("/")};
z.e.dS=function(){var a=z.rf(this.mA);if(a&&!a.r){var b=[];z.x(a,function(a){b.push(z.wn(a,null,!0))});this.xT.innerHTML=b.join("")+'\x3cdiv class\x3d"zg-clear"\x3e\x3c/div\x3e';a.length&&z.Q(z.J("zh-topic-side-related-topics-wrap"),!0)}};
z.e.MR=function(a){var b=a.target;b&&b.name&&"remove"===b.name&&(this.HP=b,this.gG||(this.gG=!0,this.ry=new z.V(!0),this.v().g(this.ry,"success",this.NR),a="token\x3d"+this.HP.parentNode.getAttribute("data-token")+"\x26action\x3dremove\x26element\x3d"+(0,window.encodeURIComponent)((0,window.$)(a.target).prev("[data-element]").text()),this.ry.ajax("/topic/"+z.pE[0][1]+"/information/manage",a,"POST")))};
z.e.NR=function(){this.gG=!1;var a=z.rf(this.ry);if(!a)return z.U.message("网络异常");if(a.r)return z.U.message(a.msg);a.msg&&(a=a.msg,z.L("zm-topic-info-content-main",this.h).innerHTML=(0,window.$)(a).html())};z.e.OR=function(a){a.preventDefault();this.iG||(this.iG=!0,this.sy=new z.V(!0),this.v().g(this.sy,"success",this.LR),a=z.hg(this.Ks),this.sy.ajax("/topic/"+z.pE[0][1]+"/information/manage","title\x3d"+a[0].value+"\x26content\x3d"+a[1].value+"\x26url\x3d"+a[2].value+"\x26action\x3dadd","POST"))};
z.e.LR=function(){this.iG=!1;var a=z.rf(this.sy);if(!a)return z.U.message("网络异常");if(a.r)return z.U.message(a.msg);a.msg&&(a=a.msg,z.L("zm-topic-info-content-main",this.h).innerHTML=(0,window.$)(a).html(),a=z.hg(this.Ks),z.x(a,function(a,c){3>c&&(a.value="")}))};z.e.PA=z.Jm(function(){var a=z.ls.Y();a.show();var b=z.L("zm-topic-search-input-new");b.value&&z.ms(a,b.value);a.Ka.data.length||a.Ka.nk(z.pE[0])},!0);z.v(aI,z.R);aI.prototype.B=function(){this.h=this.L().B("FORM",{method:"POST",style:"display:none"})};aI.prototype.post=function(a,b,c){var d=this.m();d||(this.render(),d=this.m());d.action=b||"";d.target=c||"";bI(this,d,a);d.submit()};z.v(fI,z.Cl);fI.prototype.init=function(){var a=z.Vo(new z.Mo(window.location.href),"group_id");a&&(this.Yj=new z.V(!1),this.v().Ba(this.Yj,"success",this.Wz),a&&this.Yj.ajax("/noti7/read","group_id\x3d"+a,"POST"))};fI.prototype.Wz=function(){var a=z.rf(this.Yj);if(a&&!a.r&&a.msg){var b=a.msg;if(!0===b||"true"===b||"True"===b)return;this.fR=a.msg;this.dispatchEvent("change")}(a=z.MF)&&z.Cu(a)};z.v(gI,z.R);z.e=gI.prototype;z.e.init=function(){z.NF.M(this);this.w(window.document.body)};
z.e.D=function(){gI.o.D.call(this);jI(this);if(this.Mb=z.J("zh-list-meta-wrap"))this.v().g(this.Mb,"click",this.ap),z.Vo(new z.Mo(window.location.href),"fc")&&lI(this);var a=z.J("zh-favlists-wrap");a&&(new GH(a,null,"favlist",null,!0)).init();hI(this);(a=z.J("zh-favlist-log-list-wrap"))&&(new GH(a,null,"favlist",null,!0)).init();iI();if(a=z.J("zh-favlist-followers-wrap"))a=new GH(a,null,"people",["zg-btn-follow","zg-btn-unfollow"],!0),a.wi("zm-profile-section-item"),a.NB(!0),a.init();this.v().g(window,
"hashchange",this.wX);this.yy();this.Qo=new fI;this.Qo.init()};z.e.mP=function(a){a=a.target;var b=a.id.split("-"),c=b[1],b=b[2];(new z.V(!0)).ajax("/collection/remove","answer_id\x3d"+c+"\x26favlist_id\x3d"+b);if(b=z.Jg(a,"div","zm-item"))a=z.Nf("zm-item-answer",b),1===a.length?z.N(b):(a=z.Pb(a,function(a){return a.getAttribute("data-aid")===c}))&&z.N(a.parentNode)};z.e.xU=z.Jm(function(){z.qA.Y().show(!0);z.Bk("collect","click_add_collection_start","collections_sidebar_create_collection")},!0);
z.e.SA=function(a){this.Nz?this.fb.U()?this.fb.G(!1):(this.fb.G(!0),a.stopPropagation(),a.preventDefault(),this.Sk()):(a.stopPropagation(),a.preventDefault(),this.Cj(),this.Sk());this.Nz=!0};z.e.Sk=function(){this.v().Ba(window.document,"click",function(){this.fb.G(!1)})};z.e.Cj=function(){var a=z.J("zh-list-side-head");this.fb=new z.jw;this.ey=!0;this.visible||this.fb.Ha(this.ES=new z.ew("设置为公开"));this.fb.Ha(this.zS=new z.ew("删除此收藏夹"));this.ey&&(this.fb.render(a),this.v().g(this.fb,"action",this.uj))};
z.e.ap=function(a){a=a.target;switch(a&&a.name){case "edit":z.uA(z.qA.Y());break;case "addcomment":z.zk({category:"collect",action:"click_add_collection_comment_start",label:"collection_collection_name_add_collection_comment_start"});lI(this);this.wa.Ef();this.wa.vc()&&this.wa.Ci("view_comments",(0,window.parseInt)(z.Dg(a),10)||0);break;case "remove":kI(this)}};
z.e.uj=function(a){a.target===this.ES?z.U.confirm("确定设置收藏夹为公开？","收藏夹设置为公开后，将不能再设置为私密。",function(a){a&&mI(this)},this):a.target===this.zS&&kI(this)};z.e.yy=function(){var a=1,b=(0,window.$)("ul.hot-favlists"),c=null;(0,window.$)("#js-hot-fav-switch").click(function(){c&&"pending"===c.state()||(a=5<=a?1:a+1,c=dI(a).done(function(a){b.html(a)}))})};z.v(nI,z.Cl);
nI.prototype.init=function(){if(this.ik=z.J("zh-question-redirect-info"))this.ik.innerHTML&&(this.Do=!0),this.v().g(this.ik,"click",function(a){"cancel"===a.target.name&&qI(this)});var a=z.J("zh-question-side-header-wrap");if(z.$A.lb&&!z.$A.EG&&a){var b=z.J("zh-question-filter-wrap");b?z.cg(a,b):a.style[z.C?"styleFloat":"cssFloat"]="none"}(this.cg=z.J("zh-question-operation-menu"))&&this.Cj();this.v().g(z.dk,"anon_change",function(a){var b=z.J("zh-question-side-invitation-anon");b&&z.Q(b,a.kb);(b=
z.J("zh-question-side-invitation-notanon"))&&z.Q(b,!a.kb);this.im&&this.im.Za(rH(this.data.bh)||!a.kb)})};
nI.prototype.Cj=function(){this.fb=new z.jw;var a=this.data.cn,b=this.cg.getAttribute("data-auth"),b=b?b.split(","):[];if(null==a||0===a)this.fb.Ha(this.Gt=pI("使用匿名身份",!1)),oI(this),z.uE("question_op_redirect")||"close"===z.bk.status||(this.fb.Ha(this.im=pI(this.Do?"撤消重定向":"问题重定向")),this.im.Za(rH(this.data.bh)||!this.data.kb)),z.y(b,"auth-f-manage")&&this.fb.Ha(this.DS=pI("更新话题页显示",!1)),this.v().g(this.fb,"action",this.uj),this.Gt&&this.v().g(z.dk,"anon_change",function(){oI(this)}),this.Cb&&z.y(b,
"auth-pu-mark")&&(this.fb.Ha(this.Mz=pI("优质回答",!0)),this.Mz.Ic(this.Cb.kQ)),a=new z.sw("Settings",this.fb),a.ni=!0,z.uw(a),a.w(this.cg)};
nI.prototype.uj=function(a){if(a.target===this.Gt)z.ak(this.data.kb?0:1);else if(a.target===this.im){if(!1===z.FC({om:!0})())return!1;this.gp||(this.gp=new z.yC(this.qa),this.v().g(this.gp,"change",this.NQ));this.fb.G(!1);this.Do?qI(this):this.gp.show()}else a.target===this.yS?(a=this.yS.qf()?"/unlock_summary":"/lock_summary",z.Tj("/question/"+this.data.ub+a,function(){window.top!==window?window.top.location.href="/question/"+z.bk.ub:window.location.reload()},"POST")):a.target===this.DS?window.$.post("/refresh_topic_feeds",
{q:z.bk.ub}).done(function(a){a.r||z.U.message("操作成功！")}):a.target===this.Mz&&(a=this.Mz.qf()?"/good_mark":"/good_unmark",window.$.post("/answer/"+this.Cb.ub+a).done(function(a){a.r||z.U.message("操作成功！")}))};
nI.prototype.NQ=function(){this.ik.innerHTML='\x3cdiv class\x3d"zg-wrap"\x3e\x3cdiv class\x3d"zu-global-nitify-inner"\x3e\x3cspan class\x3d"zu-global-notify-icon"\x3e\x3c/span\x3e此问题将跳转至 \x3ca href\x3d"/question/'+this.gp.lu+'"\x3e'+this.gp.xI+'\x3c/a\x3e（\x3ca href\x3d"javascript:;" name\x3d"cancel"\x3e撤消重定向\x3c/a\x3e）\x3c/div\x3e\x3c/div\x3e';z.Q(this.ik,!0);this.Do=!0;this.im.zp("撤消重定向")};z.v(rI,z.R);rI.prototype.B=function(){rI.o.B.call(this);this.h=z.Yf(uK)};rI.prototype.D=function(){rI.o.D.call(this);this.Ad=(0,window.$)(this.m());this.Bm=z.Mp("answer",this.VC);var a=z.tt(window.location.protocol+"//"+window.location.hostname+"/question/"+this.pT+"/answer/"+this.VC);(0,window.$)(".js-qrcode-image",this.Ad).attr("src",a);this.Eb()};
rI.prototype.Eb=function(){var a=this;(0,window.$)("button.weibo",this.Ad).click(function(){a.Bm.done(function(a){a.r||(z.pB(a.msg.sina),z.Bk("share","click_share_answer_to_weibo_start","answer_box_after_submit_answer"))})})};var uK='\x3cdiv class\x3d"answer-share-tip"\x3e分享我的回答到\x3cbutton class\x3d"wechat hidden-phone"\x3e\x3cdiv class\x3d"qr-code"\x3e扫描二维码\x3cimg class\x3d"js-qrcode-image" alt\x3d"微信分享二维码"\x3e\x3c/div\x3e\x3cspan class\x3d"ico z-ico-wechat"\x3e\x3c/span\x3e微信\x3c/button\x3e\x3cbutton class\x3d"weibo"\x3e\x3cspan class\x3d"ico z-ico-weibo"\x3e\x3c/span\x3e微博\x3c/button\x3e\x3c/div\x3e';z.v(sI,z.es);var vI=[{value:"精简文字描述",label:"精简文字描述"},{value:"补充必要的信息",label:"补充必要的信息"},{value:"改进标点或格式",label:"改进标点或格式"},{value:"other",label:"其他"}];z.e=sI.prototype;z.e.w=function(a){sI.o.w.call(this,a);this.v().g(z.dk,"anon_change",this.rj)};z.e.rj=function(a){this.Oy||z.T.enable(this.h,"zm-editable-disabled",a.kb)};
z.e.al=function(){sI.o.al.call(this);this.jA=z.M("div",{"class":"zm-editable-require-reason-wrap",style:"padding:10px 0 0 0"},[z.M("a",{"class":"zg-right zg-link-litblue",href:"/question/19550238/answer/12202028",target:"_blank"},"为什么问题可以被公共编辑？"),uI(),this.mH=z.M("span"),this.rT=z.M("div",{"class":"zg-form-text-input",style:"height:22px;margin:10px 0 0 0;display:none"},this.qT=z.M("textarea",{style:"width:100%;height:22px !important;min-height:22px !important;"}))]);z.cg(this.jA,this.sc);this.qp&&
wI(this," * 必选","zg-gray-normal");var a=z.Lf("select",null,this.jA)[0];this.v().g(a,"change",function(){z.Q(this.rT,"other"===a.value);wI(this," * 必选","zg-gray-normal")})};
z.e.Zg=function(a){var b=z.Lf("select",null,this.jA)[0],c=b.value;if(this.qp){if("none"===c){wI(this,"请选择一个修改理由");return}if("other"===b.value&&(c=z.xn(this.qT.value),!c)){wI(this,"请填写修改理由");return}}"title"===this.wr&&-1===a.indexOf("?")&&-1===a.indexOf("？")?wI(this,"还没有输入问号"):("none"===c&&(c=""),this.params=["id\x3d"+this.qa+"\x26reason\x3d"+(0,window.encodeURIComponent)(c)+"\x26question_id\x3d"+this.qa],this.dispatchEvent("change"),sI.o.Zg.call(this,a),wI(this,"* 必选","zg-gray-normal"),this.qp=!0)};
z.e.lf=function(){return this.Id&&this.MS?(0,z.Qn)(z.Qa(this.Oa.value)):sI.o.lf.call(this)};z.e.Cg=function(){(0,window.$)(window).on("beforeunload.EditorWithReason",(0,z.r)(function(){return"你对问题的修改还未保存，确认离开该页面吗？"},this))};z.e.Nh=function(){(0,window.$)(window).off("beforeunload.EditorWithReason")};z.e.Ai=function(){sI.o.Ai.call(this);this.Nh()};z.e.Bf=function(){sI.o.Bf.call(this);this.Cg()};z.v(xI,z.R);xI.prototype.M=function(a,b){xI.o.M.call(this,a,b);this.v().g(a,"beforeexpand",this.jP)};xI.prototype.jP=function(a){var b=a.target;z.nj(this,function(a){b!==a&&a.vc()&&a.Jc(!1)})};xI.prototype.H=function(){this.v().H();xI.o.H.call(this)};z.v(yI,z.S);yI.prototype.D=function(){yI.o.D.call(this);z.Pj(this,490);(0,window.$)(this.m()).addClass("user-guiding-dialog")};z.v(CI,z.R);z.e=CI.prototype;z.e.B=function(){CI.o.B.call(this);this.h=z.M("div",{className:"question-invite-panel"})};z.e.D=function(){CI.o.D.call(this);this.K=(0,window.$)(this.m())};z.e.C=function(){CI.o.C.call(this);this.ba&&this.ba.H();delete this.ba;delete this.Sl;delete this.Hj};z.e.vc=function(){return this.Jb};z.e.Ef=function(){this.Jc(!this.Jb)};
z.e.Jc=function(a){a!==this.vc()&&(this.dispatchEvent(a?"beforeexpand":"beforecollapse"),a&&!this.wc&&DI(this),this.Jb=a,this.K.toggle(a),this.dispatchEvent(a?"expand":"collapse"))};
z.e.uy=function(a){var b=this,c=(0,z.rs)(vK),d=new z.pp(a,{Me:20,source:"/question/ac/invite-people?question_token\x3d"+this.ep,kk:this.m(),placeholder:"搜索你想邀请的人",sd:function(a,b,d){d.innerHTML=c(a.data)},filter:function(a){return z.Jb(a,function(a){return!II(b,a.member_hash)})},select:function(){return""},format:function(a){return a}});d.si=function(){return!1};var f=d.N;f.className="suggest-persons search";f.fh="person";f.kh(!1);var g=(0,window.$)(".suggest-persons-wrapper",this.h),h=z.Mj(function(){(0,window.$)(f.m()).on("click",
"button",window.$.proxy(b.zF,b))}),k=(0,window.$)(".invite-title .spinner-gray");(0,window.$)(".search-input",this.h).on("input",function(){k.css("display","inline-block")});d.addEventListener("show",function(){k.hide();var a=f.m();g.hide();(0,window.$)(".no-result-tips",b.h).remove();var c=(0,window.$)(".person",a);5<c.length&&(c.hide().slice(0,5).show(),(0,window.$)('\x3ca class\x3d"js-more" href\x3d"#"\x3e更多搜索结果\x3c/a\x3e').appendTo(a).one("click",function(){c.show();(0,window.$)(this).remove();
return!1}));h()});d.addEventListener("hide",function(){k.hide();a.value.length?(0,window.$)(".no-result-tips",b.h).length||(g.hide(),(0,window.$)('\x3cspan class\x3d"no-result-tips"\x3e没有找到你想邀请的人\x3c/span\x3e').appendTo(b.h)):(g.show(),(0,window.$)(".no-result-tips",b.h).remove())});d.addEventListener("dismiss",function(){(0,window.$)(".no-result-tips",b.h).remove();g.show()});this.ba=d};z.e.oR=function(){this.vc()?(this.ba&&this.ba.H(),DI(this)):this.wc=!1};z.e.hO=function(){z.ak(0)};
z.e.zF=z.Jm(function(a){var b=a.target,c=this.lI((0,window.$)(b).parents(".person"));this.Sl&&"pending"===this.Sl.state()&&this.Sl.abort();a=b.getAttribute("data-type");var d=z.T.has(b,this.qG),f=(0,z.r)(function(a){a?(KI(this,b,!0),this.Hj.unshift(c),MI(this),JI(this,c.id,!0),this.wM()):(KI(this,b,!1),LI(this,c.id),JI(this,c.id,!1))},this);d?(this.Sl=qH(this.ep,c.id),f(!1)):(this.Sl=window.$.post("/question/askpeople",{qid:this.ep,uid:c.id,_source_type:a,op:"add"}).done(function(a){a.r&&(z.U.message(a.msg),
f(!1))}),f(!0),HI(this,a))},!0);z.e.iO=function(a){a=a.target.getAttribute("data-uid");qH(this.ep,a);JI(this,a,!1);LI(this,a)};z.e.wM=z.Mj(function(){z.X.bh&&window.$.post("/question/popup",{action:"invite",question_token:this.ep},function(a){a&&BI(new yI,a)})});z.e.lI=function(a){var b=(0,window.$)(".zm-item-link-avatar",a),c=(0,window.$)(".zg-link",a);return{id:String((0,window.$)("button",a).data("uid")),avatar:(0,window.$)("img",b).attr("src"),fullname:c.text(),url_token:b.attr("href").split("/").slice(-1)[0]}};
var EI='\x3ci class\x3d"icon icon-spike"\x3e\x3c/i\x3e\x3cdiv class\x3d"spinner"\x3e正在加载，请稍等 \x3ci class\x3d"spinner-gray"\x3e\x3c/i\x3e\x3c/div\x3e',OI='你已邀请 \x3cspan class\x3d"invited-shortlist"\x3e\x3c% helper.each(persons.slice(0, 2), function(person, i, sliced) { %\x3e\x3ca href\x3d"/people/\x3c%\x3dperson.url_token%\x3e" class\x3d"zg-link-gray"\x3e\x3c%\x3dperson.fullname%\x3e\x3c/a\x3e\x3c%\x3d i !\x3d\x3d sliced.length - 1 ? "、" : ""%\x3e\x3c% }); %\x3e\x3c%\x3dhelper.fullList()%\x3e\x3c/span\x3e\x3c% if (persons.length \x3e 2) { %\x3e 等 \x3c%\x3dpersons.length%\x3e 人 \x3c% } %\x3e\x3c% if (persons.length \x3c maxInvites) { %\x3e ，还可以邀请 \x3c%\x3dmaxInvites - persons.length%\x3e 人\x3c% } %\x3e',
NI='\x3cdiv class\x3d"invited-hovercard"\x3e\x3ci class\x3d"icon icon-spike"\x3e\x3c/i\x3e\x3cul class\x3d"invited-fulllist"\x3e\x3c% helper.each(persons, function(person, i) { %\x3e\x3cli\x3e\x3ca title\x3d"\x3c%-person.fullname%\x3e" class\x3d"zm-item-link-avatar" href\x3d"/people/\x3c%\x3dperson.url_token%\x3e"\x3e\x3cimg src\x3d"\x3c%\x3dperson.avatar%\x3e" class\x3d"zm-item-img-avatar"\x3e\x3c/a\x3e\x3ca href\x3d"/people/\x3c%\x3dperson.url_token%\x3e" class\x3d"zg-link-gray" title\x3d"\x3c%-person.fullname%\x3e"\x3e\x3c%\x3dperson.fullname%\x3e\x3c/a\x3e\x3cbutton class\x3d"cancel-button zg-link-btn zg-link-gray" data-uid\x3d"\x3c%\x3dperson.id%\x3e"\x3e收回邀请\x3c/button\x3e\x3c/li\x3e\x3c% }) %\x3e\x3c/ul\x3e\x3c/div\x3e',
vK='\x3ca data-tip\x3d"p$t$\x3c%\x3durl_token%\x3e" class\x3d"zm-item-link-avatar" href\x3d"/people/\x3c%\x3durl_token%\x3e" title\x3d"\x3c%\x3dfullname%\x3e"\x3e\x3cimg src\x3d"\x3c%\x3davatar_path%\x3e" class\x3d"zm-item-img-avatar"\x3e\x3c/a\x3e\x3cdiv class\x3d"content"\x3e\x3cbutton class\x3d"invite-button zg-btn zg-btn-green" data-uid\x3d"\x3c%\x3dmember_hash%\x3e" data-type\x3d"search"\x3e邀请回答\x3c/button\x3e\x3cdiv class\x3d"describe"\x3e\x3ca data-tip\x3d"p$t$\x3c%\x3durl_token%\x3e" href\x3d"/people/\x3c%\x3durl_token%\x3e" class\x3d"zg-link"\x3e\x3c%\x3dhighlighted_fullname%\x3e\x3c/a\x3e\x3c% if(headline) { %\x3e ，\x3cspan class\x3d"bio" title\x3d"\x3c%-headline%\x3e"\x3e\x3c%\x3dhighlighted_headline%\x3e\x3c/span\x3e \x3c% } %\x3e\x3c/div\x3e\x3cdiv class\x3d"reason"\x3e\x3c% if (detailed_info) {%\x3e \x3c%\x3ddetailed_info%\x3e\x3c% } %\x3e\x3c% if (topic["answer_num"]) {%\x3e在 \x3ca href\x3d"/people/\x3c%\x3durl_token%\x3e/topic/\x3c%\x3dtopic["url_token"]%\x3e/answers" data-tip\x3d"t$b$\x3c%\x3dtopic["url_token"]%\x3e" data-token\x3d"\x3c%\x3dtopic["url_token"]%\x3e" data-topicid\x3d"\x3c%\x3dtopic["id"]%\x3e"\x3e \x3c%\x3dtopic["name"]%\x3e \x3c/a\x3e 话题下有 \x3c%\x3dtopic["answer_num"]%\x3e 个回答 \x3c% } %\x3e\x3c/div\x3e\x3c/div\x3e';z.v(PI,z.R);z.e=PI.prototype;z.e.D=function(){PI.o.D.call(this);this.v().g(this.h,"click",this.ap);QI(this);this.v().g(this,"click!",function(a){"comment"===a.namespace&&a.Mc.fill("label","question")});this.g("trackRequested",function(a){a.label="question_box";z.zk(a)})};z.e.Dj=function(){var a=(0,window.$)("a[name\x3dreport-question]",this.m());if(a.length){var b=new z.Aw("question",this.data.qa);z.Dw(b,a[0]);b.mb(this)}};
z.e.Ej=function(){var a=(0,window.$)('a[name\x3d"share"]',this.m()).get(0);a&&z.qB(a,"question",this.data.ub,window.location.protocol+"//"+window.location.host+"/question/"+this.data.ub).mb(this)};
z.e.ap=function(a){var b=(a=z.Jn(this.h,a.target))&&a.name;if(b)switch(b){case "addcomment":"添加评论"===window.$.trim((0,window.$)(a).text())?z.Jm(this.gs).call(this,a):this.gs(a);break;case "remove":TI(this);break;case "admin":SI(this,a);break;case "invite":this.Hy.Ef(),this.dispatchEvent(new z.Jx("click!invitation",{category:"invitation",action:(this.Hy.vc()?"show":"hide")+"_ask_to_answer_card",label:"?",value:this.data.we}))}};
z.e.gs=function(a){this.wa.Ef();this.wa.vc()&&this.wa.Ci("view_comments",(0,window.parseInt)(z.Dg(a),10)||0)};z.e.PM=function(a){this.FC.W(a.msg.action);this.FC.zp(a.msg.caption)};z.v(UI,z.IB);UI.prototype.w=function(a){var b=this;UI.o.w.call(this,a);this.Ne&&this.ru(this.tr.kb);this.g("trackRequested",function(a){a.label="answer_box";a.value=(0,window.$)(b.h).index(".zm-item-answer")+1;z.zk(a)})};UI.prototype.U=function(){return(0,window.$)(this.h).is(":visible")};z.v(VI,z.G);z.e=VI.prototype;z.e.show=function(a){if(this.Eo)return this;this.Eo=!0;this.dispatchEvent("willShow");this.K.addClass(this.position).appendTo("body");this.pC=(0,window.$)(a);this.target=this.pC[0];if(!this.target)return this;this.ea();this.K.addClass("is-active");this.dispatchEvent("show");this.K.on("click",".js-dismiss",(0,z.r)(this.hide,this));!1!==this.Oz.Nq&&this.Nq();return this};
z.e.ea=function(){var a=this.position,b=this.offset(a),c;c=b;var d=this.ej,f=(0,window.$)(window),g=d.clientWidth,d=d.clientHeight,h=f.scrollTop(),k=f.scrollLeft(),m=f.innerHeight(),f=f.innerWidth();c={top:c.top>h+z.Si(window.document.body).top,bottom:c.top+d<h+m,left:c.left>k,right:c.left+g<k+f};c=c[a]?a:z.mc(c,z.Ab);a!==c&&(b=this.offset(c));0>b.left&&(this.K.find(".tooltip-arrow").css("left",WI(this.ej).width/2+b.left),b.left=0);this.K.removeClass("top right bottom left").addClass(c).css(b);this.dispatchEvent("reposition")};
z.e.offset=function(a){var b=WI(this.ej),c=b.width,b=b.height,d=WI(this.target),f=d.width,d=d.height,g=this.pC.offset();switch(a){case "top":return{top:g.top-b,left:g.left+f/2-c/2};case "bottom":return{top:g.top+d,left:g.left+f/2-c/2};case "right":return{top:g.top+d/2-b/2,left:g.left+f};case "left":return{top:g.top+d/2-b/2,left:g.left-c}}};
z.e.hide=function(a){if(this.Eo)return this.dispatchEvent({type:"hide",reason:"string"===typeof a?a:"click"}),this.Eo=!1,window.Modernizr.csstransitions?this.K.onTransitionEnd((0,z.r)(this.clear,this),350).removeClass("is-active"):this.clear(),this};z.e.Nq=function(){function a(){if(!b.Eo)return z.vk.pa("update",a);z.sk(z.vk,b.ej)||(b.hide("outOfView"),z.vk.pa("update",a))}var b=this;z.vk.g("update",a)};z.e.clear=function(){this.K.remove()};(0,z.w)();z.v($I,z.R);var qJ=z.Mj(ZI);z.e=$I.prototype;z.e.init=function(){z.NF.M(this);this.w(window.document.body)};z.e.D=function(){$I.o.D.call(this);this.vo();bJ(this);this.Qo=new fI;this.v().g(this.Qo,"change",this.Wz);this.Qo.init();this.kJ();var a=z.J("zh-question-meta-wrap");a&&(this.Yt=new PI(this.data),this.M(this.Yt),this.Yt.w(a),this.Yt.mb(this));aJ(this);(a=z.Fk.topic_errors_info)&&z.Gl(a)};
z.e.kJ=function(){this.data.ub=z.bk.ub;eJ(this,!0);z.X.qb()&&(cJ(this),dJ(this));kJ(this);(this.qw=z.J("zg-question-suggested-topics"))&&this.v().g(this.qw,"click",this.mR);this.uo();this.v().g(window,"hashchange",function(a){a=a.hc;a.oldURL&&"writing"===a.oldURL.split("#")[1]||oJ(this)});hJ(this);nJ(this);jJ(this);oJ(this,null);gJ(this);z.nE&&(0,window.setTimeout)(function(){window.location.href=z.nE},5E3)};
z.e.vo=function(){(0,z.iC)("question",this.data.ub,"read");this.v().g(this,["click!","show!"],function(a){"comment"===a.namespace&&a.Mc.fill("category","question_answer").fill("label","question_answer");"invitation"===a.namespace&&a.Mc.fill("label","question_page")})};z.e.Wz=function(){this.sP=!0;this.uk=(0,window.$)(this.Qo.fR)[0];z.dg(this.uk,z.L("zu-top"));z.Q(this.uk,!0);z.$A.lb||(this.mj=new z.wr,this.mj.w(this.uk),eH(this.mj));this.v().g(this.uk,"click",this.wF);oJ(this)};
z.e.KP=function(a){"close"!==z.bk.status&&(a=a.target.m(),this.Ob=new sI(this.data.qa,"/question/detail","content",!0,null,600),tI(this.Ob,rH(this.data.bh)),z.L("zm-editable-content",a).innerHTML&&(this.Ob.qp=!0),this.Ob.w(a),this.v().g(this.Ob,"click_edit",function(){z.W.Ia("ga_question_supplement_edit_start")}),this.v().g(this.Ob,"cancel_edit",function(){z.W.Ia("ga_question_supplement_edit_cancel")}),this.v().g(this.Ob,"save_changed",function(){z.W.Ia("ga_question_supplement_edit_save_changed")}),
this.v().g(this.Ob,"save_unchanged",function(){z.W.Ia("ga_question_supplement_edit_save_unchanged")}),this.Ob.addEventListener("beforeedit",z.FC({om:!0})))};
z.e.NP=function(a){a=a.target.m();var b=z.J("zh-question-answer-summary-link"),c;!a||!z.$A.Iy&&this.data.LU||(c=new z.es(!0,"/question/summary","content"),z.$r(c,["id\x3d"+this.data.qa]),c.$q=!1,c.w(a));if(b){var d=z.J("zh-question-answer-summary-wrap");this.v().g(b,"click",function(){c&&(z.Q(d,!0),c.Bf())}).g(d,"click",function(a){"cancel"===a.target.name&&(a=!c.lf(),z.Q(d,!a))})}this.KU=c;this.KU.addEventListener("beforeedit",z.FC({om:!0}))};
z.e.wF=function(a){if("close"===a.target.name){if(this.mj&&(z.zr(this.mj),z.yr(this.mj,!1),window.history.replaceState)){a=new z.Mo(window.location.href);var b=a.ld();b.remove("q");b.remove("psq");window.history.replaceState({},"",a.Oe+"?"+b.toString())}z.Q(this.uk,!1);z.Q(this.Zt,!1)}else if("A"===a.target.tagName&&"zh-question-suggest-reask"===a.target.id&&(z.Q(this.Zt,!1),z.ls.Y().show()),b="a"===(0,window.$)(a.target).prop("tagName").toLowerCase()?a.target:this.Fg(a.target,"A"))a.preventDefault(),
a.stopPropagation(),a=b.getAttribute("data-source")||b.href,b=a.indexOf("#"),a=0>b?null:a.substr(b+1),oJ(this,a?(0,window.decodeURIComponent)(a):a)};z.e.UO=function(){var a=this.ML,b=a.m(),c=a.ve.Xa()[0];z.Q(b,!1);c=z.Yf((0,z.qb)(c));z.cg(c,b);this.Qi[a.sa]=null;this.Hq=z.Jb(this.Hq,function(b){return b!==a.sa},this);var d=999;this.Sv=z.Jb(this.Sv,function(b){b.aid===a.sa&&(d=b.vote);return b.aid!==a.sa},this);z.N(b);a.H();iJ(this,c,d)};
z.e.Az=function(a){a=a.target;if(a instanceof UI){var b=a.m();switch(a.wv){case "collap":this.tn.appendChild(b);z.T.add(b,"zm-item-collapsed");this.data.we--;gJ(this);break;case "cancel_collap":this.Jq.appendChild(b);z.T.remove(b,"zm-item-collapsed");pJ(this,b);this.data.we++;gJ(this);break;case "set_delete":jJ(this);this.data.we--;gJ(this);break;case "cancel_delete":pJ(this,this.Qi[this.ji].m()),jJ(this),this.data.we++,gJ(this)}}};z.e.dF=function(a){return this.Qi[a]};
z.e.NU=function(a){(a=z.Jn(this.Jh,a.target))&&a.name&&("expand"===a.name?(this.JM||mJ(this),lJ(this,!0)):lJ(this,!1))};z.e.wR=function(){var a=this.Qi[this.ji],b;a?(dH(a),pJ(this,a.m())):(b=this.Xj,a=new z.V(!0),this.v().Ba(a,"success",function(){window.location.href="/question/"+z.bk.ub+"/answer/"+b.url_token}),a.ajax("/answer/unremove","aid\x3d"+b.id))};
z.e.nR=function(){var a=this.vb,b=a.Gq.checked,c=Number(!a.UD.checked),a={modal:!0,title:"确认放弃匿名身份？",content:"你在该问题下的赞同和关注行为将以实名显示。"},d=(0,z.r)(function(){if(!this.xhr||!this.xhr.Qb()){var a=this.vb.lf();if(a){var d=new z.V(!0),h=new z.So,k=b?1:0;h.add("id",this.qa).add("content",a).add("anon",k).add("copyable",c);d.on("success",function(){z.bk.kb!==k&&(z.bk.kb=k,z.dk.dispatchEvent(new z.ck(k)));var a=z.rf(this.xhr);a?a.r?z.U.alert(a.msg):(a=z.Yf((0,z.qb)(a.msg[0])),this.Jq.appendChild(a),iJ(this,
a,this.Hq.length),z.Cn(a),jJ(this),z.RA(this.vb.AE),z.UA(this.vb.AE),this.vb.H(),z.bk.kb||(new rI(this.data.ub,this.Qi[this.ji].ub)).render((0,window.$)(".zu-main-content-inner").get(0)),this.data.we++,gJ(this)):z.U.message("网络异常")},!1,this);d.ajax("/answer/add",h.toString());this.xhr=d}}},this);z.bk.kb&&!b?z.U.confirm(a,function(a){a&&d()}):d()};z.e.Fg=function(){};
z.e.mR=function(a){if((a=this.Fg(a.target))&&a.name){var b=a.name;"close"===b?z.Q(this.qw,!1):"addtag"===b&&(this.Ka.Ye(a.id.split("-")[1],a.innerHTML),z.Q(a,!1))}};z.e.uo=function(){this.XA=new nI(this.qa);this.XA.init()};z.v(rJ,$I);z.e=rJ.prototype;z.e.kJ=function(){(this.Dr=z.J("zh-single-answer-disable-wrap"))&&this.v().g(this.Dr,"click",this.RT);this.Ns();this.uo();uJ();eJ(this,!1);var a=(0,window.$)("#zh-question-answer-collections \x3e .zh-general-list").get(0);if(a){var b=new z.Xv({use:["autoload","nodeSource"]});this.M(b);b.w(a)}sJ(this)};z.e.vo=function(){this.v().g(this,["click!","show!"],function(a){"invitation"===a.namespace&&a.Mc.fill("label","answer_page")});rJ.o.vo.call(this)};
z.e.RT=function(a){a.target&&a.target.name&&dH(this.Cb)};z.e.Ns=function(){var a=z.L("zm-item-answer",z.J("zh-question-answer-wrap"));if(a){this.Cb=new UI({qa:this.qa,rE:!0});this.M(this.Cb);this.Cb.w(a);a=this.v();a.g(this.Cb,"change",this.Az);if(this.Cb.Ne){a.g(z.dk,"anon_change",function(a){tJ(this,a.kb)});var b=this.Cb.ve;b&&a.g(b,"change",function(){var a=(0,z.qb)(b.Xa()[0]),a=z.Yf(a);z.fg(a,this.Cb.h);this.Cb.H();this.Ns(a)})}vJ(this);this.Cb.kg();this.Cb.wa.eD=!1;ZI(this.Cb)}};
z.e.dF=function(a){if(this.Cb.sa===a)return this.Cb};z.e.$L='\x3ch3\x3e关于作者\x3c/h3\x3e\x3c% if (author) { %\x3e\x3ca class\x3d"zm-list-avatar-link" href\x3d"/people/\x3c%\x3d author.url_token %\x3e" tabindex\x3d"-1"\x3e\x3cimg class\x3d"zm-list-avatar-medium" src\x3d"\x3c%\x3d author.avatar_path.replace("_s.","_m.") %\x3e"/\x3e\x3c/a\x3e\x3cdiv class\x3d"zm-list-content-medium"\x3e\x3ch2 class\x3d"zm-list-content-title"\x3e\x3ca href\x3d"/people/\x3c%\x3d author.url_token %\x3e"\x3e\x3c%\x3d author.fullname %\x3e\x3c/a\x3e\x3c/h2\x3e\x3cdiv class\x3d"zg-gray-normal"\x3e\x3c%\x3d author.headline || "" %\x3e\x3c/div\x3e\x3c/div\x3e\x3c% } else { %\x3e\x3ca class\x3d"zm-list-avatar-link" href\x3d"javascript:;"\x3e\x3cimg class\x3d"zm-list-avatar-medium" src\x3d"http://img.zhihu.dev:4080/66/6b/666b0abfc_m.jpg"/\x3e\x3c/a\x3e\x3cdiv class\x3d"zm-list-content-medium"\x3e\x3ch2 class\x3d"zm-list-content-title"\x3e匿名用户\x3c/h2\x3e\x3c/div\x3e\x3c% } %\x3e';
z.e.uo=function(){this.XA=new nI(this.qa,this.Cb);this.XA.init();var a=z.J("js-sidebar-author-info");a&&(new HH(a)).init()};z.e.Az=function(a){a=a.target;if(a instanceof UI)switch(a.wv){case "collap":z.T.add(a.m(),"zm-item-collapsed");break;case "cancel_collap":z.T.remove(a.m(),"zm-item-collapsed");break;case "set_delete":case "cancel_delete":vJ(this),window.location.reload()}};z.v(wJ,z.R);z.e=wJ.prototype;z.e.init=function(){var a=z.L("js-topic-feed-page");this.w(a)};
z.e.D=function(){wJ.o.D.call(this);var a=this;this.bC=(0,window.$)(".js-topic-feed-container",this.h);this.bC.find(".js-topic-item").each(function(){var b=new zJ;a.M(b);b.w(this);a.v().g(b,"unfollow",function(){AJ(a)})});this.Ot=new EJ;this.Ot.w((0,window.$)(".js-pinned-topics",this.element)[0]);(this.$b=z.J("js-load-more"))&&this.v().g(this.$b,"click",this.Jz);this.v().g(this.Ot,"change",function(a){(0,window.$)("#tf-"+a.KJ).find(".js-pin").replaceWith('\x3ca href\x3d"javascript:;" data-action\x3d"pin-topic" class\x3d"js-pin zg-gray pin topic-hover-content"\x3e\x3ci class\x3d"z-icon-pin"\x3e\x3c/i\x3e设为常去话题\x3c/a\x3e')});
this.ev=(0,window.$)(".follow-topics-count");BJ(this);this.vo()};z.e.Jz=function(){xJ(this.$b,!0);this.xhr=new z.V(!0);this.v().Ba(this.xhr,"complete",(0,z.r)(this.Yg,this));var a=new z.Kn;a.add("page",++this.page);this.xhr.ajax(window.location.pathname,a.ld())};z.e.Yg=function(){var a=z.rf(this.xhr);a&&!a.r&&(0<a.msg.length?(yJ(this,a.msg),xJ(this.$b,!1)):(0,window.$)(this.$b).hide())};
z.e.vo=function(){var a=(0,window.$)(this.m());window.$.each({".zu-main-sidebar .topics-plaza a":["visit_topic_square","topic_feed_sidebar"],".hidden-topics-plaza a":["visit_topic_square","topic_feed_recommend"],".js-pager.topics-pager":["click_change_recommend_topic","topic_feed_recommend"],".js-nomore-recommend":["click_nomore_recommend_topic","topic_feed_recommend"],".js-list .zg-btn-follow":["click_follow_recommend_topic","topic_feed_recommend"],".js-list .zg-btn-unfollow":["click_unfollow_recommend_topic",
"topic_feed_recommend"],'.topic-recommend .topic-feed-item a[href^\x3d"/question/"]':["visit_question","topic_feed_recommend"]},function(b,c){a.on("click",b,function(){z.Y.apply(null,["topic"].concat(c))})})};z.v(zJ,z.R);zJ.prototype.D=function(){zJ.o.D.call(this);this.v().g(this.h,"click",(0,z.r)(this.yz,this))};
zJ.prototype.yz=function(a){var b=a.target;a=(0,window.$)(b).attr("data-action");var c=(0,window.$)(this.h).find(".topic-avatar img"),d=c.clone(),f,g=(0,window.$)(this.h).data("id");if("pin-topic"===a)f=this.getParent().Ot,HJ(f,g).done(function(a){if(!a.r&&a.msg){(0,window.$)(".zu-main-sidebar .side-title").show();z.Cn(b);(0,window.$)(b).replaceWith('\x3ca href\x3d"javascript:;" data-action\x3d"unpin-topic" class\x3d"js-pin zg-gray unpin topic-hover-content"\x3e\x3ci class\x3d"z-icon-unpin"\x3e\x3c/i\x3e取消常去话题\x3c/a\x3e');
a=c.offset();var g=(0,window.$)(f.h).offset();1E3<a.top-g.top?(g=(0,window.$)(".top-nav-topic-selector.current a").offset(),g={top:g.top+20,left:g.left+15,width:"25px",height:"25px",opacity:.1},d.css({position:"absolute","z-index":"999"}).css("top",a.top).css("left",a.left).appendTo("body").animate(g,300,function(){d.remove()})):d.css({position:"absolute","z-index":"999"}).appendTo("body").css("top",a.top).css("left",a.left).animate({top:g.top-63+(0,window.$)(f.h).height(),left:g.left,width:"-\x3d50px",
height:"-\x3d50px",opacity:.5},300,function(){d.remove()});(0,window.$)(".no-pin-topics").hide()}});else if("unpin-topic"===a)IJ(this.getParent().Ot,g,function(){var a=(0,window.$)(b).replaceWith('\x3ca href\x3d"javascript:;" data-action\x3d"pin-topic" class\x3d"zg-gray pin topic-hover-content" style\x3d""\x3e\x3ci class\x3d"z-icon-pin"\x3e\x3c/i\x3e设为常去话题\x3c/a\x3e')[0];z.Cn(a)});else if("unfollow"===a){var h=this,k=(0,window.$)(h.h);(a=(0,window.$)(".topic-recommend .zg-btn-unfollow[data-id\x3d"+
b.id.match(/-(.*)/)[1]+"]").get(0))?(0,z.WD)(a,"topic",null,["zg-btn-follow","zg-btn-unfollow"]):(0,z.WD)(b,"topic",null,["follow","unfollow"]);k.fadeOut(function(){k.remove();h.dispatchEvent("unfollow")})}};z.v(EJ,z.R);EJ.prototype.IT=(0,z.rs)('\x3cdiv class\x3d"side-topic-item js-pin-item  cursor-move" data-topicid\x3d"\x3c%\x3dtopic.id%\x3e" \x3e\x3ca href\x3d"/topic/\x3c%\x3dtopic.url_token%\x3e" class\x3d"pin-topic-avatar-link"\x3e\x3cimg src\x3d"\x3c%\x3dtopic.avatar_path%\x3e" alt\x3d"" title\x3d"拖动以排序" class\x3d"side-topic-avatar js-topic-avatar"\x3e\x3c/a\x3e\x3cdiv class\x3d"side-topic-content ellipsis"\x3e\x3ca href\x3d"/topic/\x3c%\x3dtopic.url_token%\x3e" class\x3d"topic-link side-topic-title"\x3e\x3c%\x3dtopic.name%\x3e\x3c/a\x3e\x3cdiv class\x3d"side-topic-meta"\x3e\x3c% if (topic.children_num \x3e 0) { %\x3e\x3cspan class\x3d"zg-gray"\x3e\x3c%\x3dtopic.children_num%\x3e 个子话题\x3c/span\x3e\x3cspan class\x3d"bull"\x3e\x26bull;\x3c/span\x3e\x3c% } %\x3e\x3cspan class\x3d"zg-gray"\x3e\x3c%\x3dtopic.followers_num%\x3e 人关注\x3c/span\x3e\x3c/div\x3e\x3c% if (topic.feed_num \x3e 0) { %\x3e\x3ca class\x3d"side-topic-more" href\x3d"/topic/\x3c%\x3dtopic.url_token%\x3e"\x3e\x3c%\x3dtopic.feed_num %\x3e 条动态\x26nbsp;\x26raquo;\x3c/a\x3e\x3c% }else{ %\x3e\x3ca class\x3d"side-topic-more" href\x3d"/topic/\x3c%\x3dtopic.url_token%\x3e"\x3e进入话题 \x26raquo;\x3c/a\x3e\x3c% } %\x3e\x3c/div\x3e\x3ca href\x3d"javascript:;" data-action\x3d"up" class\x3d"up" data-tip\x3d"s$b$置顶"\x3e\x3c/a\x3e\x3ca href\x3d"javascript:;" data-action\x3d"remove" class\x3d"delete"\x3e\x3c/a\x3e\x3c/div\x3e');
EJ.prototype.D=function(){EJ.o.D.call(this);this.v().g(this.h,"click",(0,z.r)(this.yz,this));FJ(this)};
EJ.prototype.yz=function(a){var b=this,c=a.target,d=(0,window.$)(c).attr("data-action");if(d){var f=(0,window.$)(c).parents(".js-pin-item");if("up"===d){a=f.position();var g=f.clone();f.before(g).css({position:"absolute","z-index":"999"}).css("top",a.top).animate({top:(0,window.$)(b.h).position().top},200,function(){g.remove();f.css({position:"relative",top:0}).prependTo(b.h);b.Du()});g.css("opacity",0)}else"remove"===d&&f.fadeOut(function(){f.remove();b.Du();b.dispatchEvent({type:"change",KJ:f.attr("data-topicid")});
0===(0,window.$)(".js-pin-item").length&&(0,window.$)(".no-pin-topics").show()})}else a.stopPropagation()};EJ.prototype.Du=function(){var a=[];(0,window.$)(this.h).find("div.js-pin-item").each(function(){a.push((0,window.$)(this).attr("data-topicid"))});return window.$.post("/pin-topic",{topic_ids:a.join(",")},function(){})};z.v(JJ,z.R);JJ.prototype.init=function(){z.NF.M(this);this.w(window.document.body)};JJ.prototype.D=function(){JJ.o.D.call(this);this.zy("zh-question-followers-list-wrap")};JJ.prototype.zy=function(a){if(a=z.J(a)){var b=new z.Xv;this.M(b);b.use("locationSource");b.w(a)}};z.v(LJ,z.R);LJ.prototype.init=function(){z.NF.M(this);this.w(window.document.body);this.Os();NJ(this);OJ(this);MJ();KJ("[data-highlight]",this.zA)};
LJ.prototype.Os=function(){function a(a){var b=new z.R;(0,window.$)("li.answer-item",a).each(function(){var a=new z.TD.prototype.Ik;a.No="actions";a.mq="zm-votebar";a.Ar="z-icon-fold";a.Au="sprite-global-icon-fold-white";b.M(a);a.w(this)});return b}var b=this;(0,window.$)("[data-paging]").each(function(){var c=new z.Xv({use:["dataPagingSource"]});c.use("childConstructor",{factory:a});var d=(0,window.$)(this).data("navigable");d&&c.use("shortcut",d);b.M(c);c.w(this);z.Tv(c,function(a){KJ((0,window.$)("[data-highlight]",
a),b.zA)})})};var YJ=(0,window.$)("#is-topstory").length?"topstory2":"homefeed",QJ=z.C&&!z.E(9),TJ={ac:"actioncard",q:"question",a:"answer",p:"article",c:"column",r:"roundtable"},VJ={question:"question",answer:"question",article:"column",column:"column",roundtable:"roundtable"},WJ={question:"question",answer:"question",article:"article",column:"column",roundtable:"roundtable"};PJ.prototype.Eb=function(){this.fC=(0,window.$)('meta[itemprop\x3d"ZReactor"]',this.xh);this.fC.length&&(SJ(this),this.MP())};
PJ.prototype.dT=function(){var a=[],b=z.Vn(550,function(){a.length&&(RJ(a),a=[])});return function(c){a.push(c);b()}}();
PJ.prototype.MP=z.Mj(function(){z.F(z.W,"click_feed_fresh",function(a){RJ({mid:z.Fk.ga_vars.user_hash,object_type:"btn",object_id:2,object_meta:{load_items:a.data.count},action_type:"click",context:YJ,others:"",time:(0,z.w)()})});z.F(z.W,"topstory_feed_more",function(){RJ({mid:z.Fk.ga_vars.user_hash,object_type:"btn",object_id:1,object_meta:{next:(0,window.$)("#js-home-feed-list .feed-item").length+1},action_type:"click",context:YJ,others:"",time:(0,z.w)()})})});z.v(ZJ,z.Hw);ZJ.prototype.Yg=function(a){a&&!a.r&&(a=a.msg,a.length?(z.Q(this.$b,0<a.length),this.offset+=a.length,this.Lq(a),z.Iw(this,!1),z.Lw(this)):this.Fk.hide())};var wK={ROUNDTABLE_ADD_RELATED:"roundtable",ARTICLE_VOTE_UP:"post_vote",ARTICLE_CREATE:"post_create",RECOMMENDED:"feed_recommended",QUESTION_FOLLOW:"feed_question_follow",QUESTION_CREATE:"feed_question",ANSWER_VOTE_UP:"feed_answer_vote",ANSWER_CREATE:"feed_answer_answer"};
ZJ.prototype.lP=function(a){var b=a.currentTarget.h.getAttribute("data-feedtype"),b=wK[b];"comment"===a.namespace&&b&&a.Mc.fill("category","feed").fill("label",b)};ZJ.prototype.Xo=function(a){var b=z.rC(a);this.M(b);this.v().g(b,"click!",this.lP);b.w(a);new PJ(b);return b};ZJ.prototype.pI=function(a){return{params:a,method:"next"}};z.ka($J,z.R);$J.prototype.D=function(){z.R.prototype.D.call(this);this.Kr=this.m();this.Ad=(0,window.$)(this.Kr);aK(this);this.Um=(0,window.$)("#zh-main-feed-fresh-button");this.Um.length&&(this.Um.click(window.$.proxy(this.vT,this)),this.qQ?this.v().g(z.W,"topstory2",this.vH):this.v().g(z.W,"homefeed",this.vH));cK(this);dK(this)};$J.prototype.vH=function(a){if(a=(0,window.parseInt)(a.wf,10))this.dm+=a,this.Um.text((99<this.dm?"99+":this.dm)+" 条新动态").show()};
$J.prototype.vT=function(){this.Um.text("加载中…");var a=this.dm,b=this;this.ut.offset=a;this.ut.zi="live";z.Kw(this.ut,!0,null,function(c){b.Um.hide();b.dm=0;if(c&&c.msg.length){b.gv||(b.gv=(0,window.$)('\x3cdiv class\x3d"feed-item-hook feed-divider"\x3e\x3cspan\x3e上次你看到这里\x3c/span\x3e\x3c/div\x3e'));var d=(0,window.$)("."+b.PE,b.Ad).eq(0);d.length&&3<=a?b.gv.insertBefore(d):b.gv.remove();b.ut.Lq(c.msg,"prepend")}})};z.v(eK,z.Cl);eK.prototype.init=function(){var a=z.J("home-suggest-block");a&&(this.h=a,a=z.J("home-suggest-close-button"),this.v().Ba(a,"click",function(){(new z.V(!0)).ajax("/option","key\x3dno_show_lookup\x26value\x3d1");z.Q(this.h,!1)}),a=z.J("home-suggest-refresh-button"),this.v().g(a,"click",this.cS),this.kt=z.J("home-suggest-list"),hK(this))};eK.prototype.cS=function(){fK(this);return!0};
eK.prototype.zR=function(a){a.r||((a=a.msg)&&z.oa(a)&&a.length?(this.iy=[],this.kE=a,fK(this)):this.kt.innerHTML="")};z.ma(iK);z.v(lK,z.R);lK.prototype.init=function(){z.NF.M(this);this.w(window.document.body)};lK.prototype.D=function(){lK.o.D.call(this);z.Jm(z.p,{AH:!0})();var a=z.J("js-home-feed-list");if(a){var b=new $J;this.M(b);b.w(a)}z.J("home-settings-page-wrap")&&(a=z.J("zh-topic-block-editor"))&&(new z.dq(z.qE)).w(a);(new eK).init();mK();a=iK.Y();jK(a);XI()};z.v(nK,z.R);nK.prototype.init=function(){z.NF.M(this);this.w(window.document.body)};nK.prototype.D=function(){nK.o.D.call(this);var a=(0,window.$)("#zh-following-question-item-list").children(".zh-general-list");if(a.length){var b=new z.Xv;this.M(b);b.use("nodeSource");b.w(a.get(0))}};z.v(oK,z.R);oK.prototype.init=function(){z.NF.M(this);this.w(window.document.body)};oK.prototype.D=function(){oK.o.D.call(this);pK(this);this.yy();rK(this);sK();this.v().g(this,"click!",function(a){"comment"===a.namespace&&a.Mc.fill("category",this.$g).fill("label",this.DN)})};
oK.prototype.yy=function(){var a=1,b=(0,window.$)("ul.hot-favlists"),c=null;(0,window.$)("#js-hot-fav-switch").click(function(){c&&"pending"===c.state()||(a=5<=a?1:a+1,c=dI(a).done(function(a){b.html(a)}))});b.on("click",".content \x3e a",function(){var a=(0,window.$)(this).closest("li").index()+1;z.zk({category:"collection",action:"visit_collection",label:"explore_sidebar_trending_collections_collection_name",value:a})})};z.v(qK,z.Xv);
qK.prototype.D=function(){qK.o.D.call(this);this.use("childConstructor",{cl:z.jC})};z.Ha("ZH.entryQuestionFollowersPage",function(){(new JJ).init()});z.Ha("ZH.entrySQ",function(){(new $I).init()});z.Ha("ZH.entrySA",function(){(new rJ).init()});z.Ha("ZH.entryL",function(){(new gI).init()});z.Ha("ZH.entryT",function(){(new LH).init()});z.Ha("ZH.entrySearch",function(){(new LJ).init()});z.Ha("ZH.entryPM",function(){(new EH).init()});z.Ha("ZH.entryPMDetail",function(){(new AH).init()});z.Ha("ZH.entryTopicFeed",function(){(new wJ).init()});z.Ha("ZH.entryHome",function(){(new lK).init()});
z.Ha("ZH.entryQuestionFollowing",function(){(new nK).init()});z.Ha("ZH.entryExplore",function(){(new oK).init()});z.Eh("page-main");}).call(this, __z_z__);
//# sourceURL=/static/revved/-/js/closure/page-main.edf9cf57.js